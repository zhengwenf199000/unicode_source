"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var ai=Object.create;var Xe=Object.defineProperty,ri=Object.defineProperties,ci=Object.getOwnPropertyDescriptor,li=Object.getOwnPropertyDescriptors,ui=Object.getOwnPropertyNames,Mt=Object.getOwnPropertySymbols,di=Object.getPrototypeOf,Bt=Object.prototype.hasOwnProperty,hi=Object.prototype.propertyIsEnumerable;var qt=(t,e,n)=>e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||(e={}))Bt.call(e,n)&&qt(t,n,e[n]);if(Mt)for(var n of Mt(e))hi.call(e,n)&&qt(t,n,e[n]);return t},q=(t,e)=>ri(t,li(e));var fi=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var pi=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ui(e))!Bt.call(t,s)&&s!==n&&Xe(t,s,{get:()=>e[s],enumerable:!(i=ci(e,s))||i.enumerable});return t};var ye=(t,e,n)=>(n=t!=null?ai(di(t)):{},pi(e||!t||!t.__esModule?Xe(n,"default",{value:t,enumerable:!0}):n,t));var L=(t,e,n)=>new Promise((i,s)=>{var o=l=>{try{r(n.next(l))}catch(c){s(c)}},a=l=>{try{r(n.throw(l))}catch(c){s(c)}},r=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,a);r((n=n.apply(t,e)).next())});var ue=fi((jo,Ft)=>{Ft.exports=Vue});var P=ye(ue());var ee=ye(ue());var H=(t,e)=>{let n=t.__vccOpts||t;for(let[i,s]of e)n[i]=s;return n};var mi={id:"2852637",name:"uniui\u56FE\u6807\u5E93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},gi="/assets/uniicons.89ed7d6d.ttf",_i={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},yi=t=>typeof t=="number"||/^[0-9]*$/g.test(t)?t+"px":t,wi=weex.requireModule("dom");wi.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+gi+"')"});var bi={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data(){return{icons:mi.glyphs}},computed:{unicode(){let t=this.icons.find(e=>e.font_class===this.type);return t?unescape(`%u${t.unicode}`):""},iconSize(){return yi(this.size)}},methods:{_onClick(){this.$emit("click")}}};function vi(t,e,n,i,s,o){return(0,ee.openBlock)(),(0,ee.createElementBlock)("u-text",{style:(0,ee.normalizeStyle)({color:n.color,"font-size":o.iconSize}),class:"uni-icons",onClick:e[0]||(e[0]=(...a)=>o._onClick&&o._onClick(...a))},(0,ee.toDisplayString)(o.unicode),5)}var jt=H(bi,[["render",vi],["styles",[_i]]]);var Vo=ye(ue());function $t(t){return weex.requireModule(t)}function Qe(t,e,...n){uni.__log__?uni.__log__(t,e,...n):console[t].apply(console,[...n,e])}function G(t,e){return typeof t=="string"?e:t}var ki=[{path:"pages/launch/launch",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/home/home",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/index/index",style:{navigationBarTitleText:"uni-app"}},{path:"pages/compound/benefit",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/register/detail",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/register/gather",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/sample/ext-module",style:{navigationStyle:"default",navigationBarTitleText:"\u6269\u5C55 module"}},{path:"pages/sample/ext-component",style:{navigationStyle:"default",navigationBarTitleText:"\u6269\u5C55 component"}},{path:"pages/sample/richAlert",style:{navigationStyle:"default",navigationBarTitleText:"RichAlert"}},{path:"pages/sample/idcardact-module",style:{navigationStyle:"default",navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/sample/ext-finger-component",style:{navigationStyle:"default",navigationBarTitleText:"ext-finger-component",enablePullDownRefresh:!1}},{path:"pages/register/register",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/compound/compound",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/apply/apply",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/leave/leave",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/study/study",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/activity/activity",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/query/query",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/sample/form-demo",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/sample/form-ndemo",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/auth/auth",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/compound/daily",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/compound/detail",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/apply/change",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/leave/list",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/leave/destroy",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/leave/detail",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/query/file",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/set/set",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/index/test",style:{navigationStyle:"default",navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/register/input",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/register/print",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/print/print",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/compound/education",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/leave/add",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/print/talk",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/blank/blank",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/apply/do",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/sample/upgrade",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/sample/echarts-demo",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/offline/offline",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/query/common",style:{navigationBarTitleText:"",enablePullDownRefresh:!1}},{path:"pages/apply/files",style:{navigationBarTitleText:""}},{path:"pages/apply/sign",style:{navigationBarTitleText:""}},{path:"pages/apply/pdf",style:{navigationBarTitleText:""}}],xi={navigationStyle:"custom",navigationBarTextStyle:"white",navigationBarTitleText:"",navigationBarBackgroundColor:"#006AEC",backgroundColor:"#F8F8F8","app-plus":{bounce:"none",background:"#006AEC",animationType:"none"}},Ti={current:0,list:[{name:"launch",path:"pages/launch/launch"},{name:"home",path:"pages/home/home"},{name:"test",path:"pages/index/index"},{name:"input",path:"pages/register/input"}]},_n={pages:ki,globalStyle:xi,condition:Ti},Si=[];function Ii(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Y(t,e,n){return t(n={path:e,exports:{},require:function(i,s){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(s==null&&n.path)}},n.exports),n.exports}var Pi=Y(function(t,e){var n;t.exports=(n=n||function(i,s){var o=Object.create||function(){function u(){}return function(p){var _;return u.prototype=p,_=new u,u.prototype=null,_}}(),a={},r=a.lib={},l=r.Base={extend:function(u){var p=o(this);return u&&p.mixIn(u),p.hasOwnProperty("init")&&this.init!==p.init||(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var p in u)u.hasOwnProperty(p)&&(this[p]=u[p]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}},c=r.WordArray=l.extend({init:function(u,p){u=this.words=u||[],this.sigBytes=p!=s?p:4*u.length},toString:function(u){return(u||d).stringify(this)},concat:function(u){var p=this.words,_=u.words,w=this.sigBytes,b=u.sigBytes;if(this.clamp(),w%4)for(var S=0;S<b;S++){var A=_[S>>>2]>>>24-S%4*8&255;p[w+S>>>2]|=A<<24-(w+S)%4*8}else for(S=0;S<b;S+=4)p[w+S>>>2]=_[S>>>2];return this.sigBytes+=b,this},clamp:function(){var u=this.words,p=this.sigBytes;u[p>>>2]&=4294967295<<32-p%4*8,u.length=i.ceil(p/4)},clone:function(){var u=l.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var p,_=[],w=function(A){A=A;var E=987654321,R=4294967295;return function(){var M=((E=36969*(65535&E)+(E>>16)&R)<<16)+(A=18e3*(65535&A)+(A>>16)&R)&R;return M/=4294967296,(M+=.5)*(i.random()>.5?1:-1)}},b=0;b<u;b+=4){var S=w(4294967296*(p||i.random()));p=987654071*S(),_.push(4294967296*S()|0)}return new c.init(_,u)}}),f=a.enc={},d=f.Hex={stringify:function(u){for(var p=u.words,_=u.sigBytes,w=[],b=0;b<_;b++){var S=p[b>>>2]>>>24-b%4*8&255;w.push((S>>>4).toString(16)),w.push((15&S).toString(16))}return w.join("")},parse:function(u){for(var p=u.length,_=[],w=0;w<p;w+=2)_[w>>>3]|=parseInt(u.substr(w,2),16)<<24-w%8*4;return new c.init(_,p/2)}},m=f.Latin1={stringify:function(u){for(var p=u.words,_=u.sigBytes,w=[],b=0;b<_;b++){var S=p[b>>>2]>>>24-b%4*8&255;w.push(String.fromCharCode(S))}return w.join("")},parse:function(u){for(var p=u.length,_=[],w=0;w<p;w++)_[w>>>2]|=(255&u.charCodeAt(w))<<24-w%4*8;return new c.init(_,p)}},g=f.Utf8={stringify:function(u){try{return decodeURIComponent(escape(m.stringify(u)))}catch(p){throw new Error("Malformed UTF-8 data")}},parse:function(u){return m.parse(unescape(encodeURIComponent(u)))}},y=r.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(u){typeof u=="string"&&(u=g.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var p=this._data,_=p.words,w=p.sigBytes,b=this.blockSize,S=w/(4*b),A=(S=u?i.ceil(S):i.max((0|S)-this._minBufferSize,0))*b,E=i.min(4*A,w);if(A){for(var R=0;R<A;R+=b)this._doProcessBlock(_,R);var M=_.splice(0,A);p.sigBytes-=E}return new c.init(M,E)},clone:function(){var u=l.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0});r.Hasher=y.extend({cfg:l.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){return u&&this._append(u),this._doFinalize()},blockSize:16,_createHelper:function(u){return function(p,_){return new u.init(_).finalize(p)}},_createHmacHelper:function(u){return function(p,_){return new h.HMAC.init(u,_).finalize(p)}}});var h=a.algo={};return a}(Math),n)}),ne=Pi,Ai=(Y(function(t,e){var n;t.exports=(n=ne,function(i){var s=n,o=s.lib,a=o.WordArray,r=o.Hasher,l=s.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=4294967296*i.abs(i.sin(h+1))|0})();var f=l.MD5=r.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,u){for(var p=0;p<16;p++){var _=u+p,w=h[_];h[_]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8)}var b=this._hash.words,S=h[u+0],A=h[u+1],E=h[u+2],R=h[u+3],M=h[u+4],Q=h[u+5],K=h[u+6],se=h[u+7],Z=h[u+8],le=h[u+9],oe=h[u+10],Oe=h[u+11],Le=h[u+12],De=h[u+13],Ee=h[u+14],Re=h[u+15],v=b[0],T=b[1],k=b[2],x=b[3];v=d(v,T,k,x,S,7,c[0]),x=d(x,v,T,k,A,12,c[1]),k=d(k,x,v,T,E,17,c[2]),T=d(T,k,x,v,R,22,c[3]),v=d(v,T,k,x,M,7,c[4]),x=d(x,v,T,k,Q,12,c[5]),k=d(k,x,v,T,K,17,c[6]),T=d(T,k,x,v,se,22,c[7]),v=d(v,T,k,x,Z,7,c[8]),x=d(x,v,T,k,le,12,c[9]),k=d(k,x,v,T,oe,17,c[10]),T=d(T,k,x,v,Oe,22,c[11]),v=d(v,T,k,x,Le,7,c[12]),x=d(x,v,T,k,De,12,c[13]),k=d(k,x,v,T,Ee,17,c[14]),v=m(v,T=d(T,k,x,v,Re,22,c[15]),k,x,A,5,c[16]),x=m(x,v,T,k,K,9,c[17]),k=m(k,x,v,T,Oe,14,c[18]),T=m(T,k,x,v,S,20,c[19]),v=m(v,T,k,x,Q,5,c[20]),x=m(x,v,T,k,oe,9,c[21]),k=m(k,x,v,T,Re,14,c[22]),T=m(T,k,x,v,M,20,c[23]),v=m(v,T,k,x,le,5,c[24]),x=m(x,v,T,k,Ee,9,c[25]),k=m(k,x,v,T,R,14,c[26]),T=m(T,k,x,v,Z,20,c[27]),v=m(v,T,k,x,De,5,c[28]),x=m(x,v,T,k,E,9,c[29]),k=m(k,x,v,T,se,14,c[30]),v=g(v,T=m(T,k,x,v,Le,20,c[31]),k,x,Q,4,c[32]),x=g(x,v,T,k,Z,11,c[33]),k=g(k,x,v,T,Oe,16,c[34]),T=g(T,k,x,v,Ee,23,c[35]),v=g(v,T,k,x,A,4,c[36]),x=g(x,v,T,k,M,11,c[37]),k=g(k,x,v,T,se,16,c[38]),T=g(T,k,x,v,oe,23,c[39]),v=g(v,T,k,x,De,4,c[40]),x=g(x,v,T,k,S,11,c[41]),k=g(k,x,v,T,R,16,c[42]),T=g(T,k,x,v,K,23,c[43]),v=g(v,T,k,x,le,4,c[44]),x=g(x,v,T,k,Le,11,c[45]),k=g(k,x,v,T,Re,16,c[46]),v=y(v,T=g(T,k,x,v,E,23,c[47]),k,x,S,6,c[48]),x=y(x,v,T,k,se,10,c[49]),k=y(k,x,v,T,Ee,15,c[50]),T=y(T,k,x,v,Q,21,c[51]),v=y(v,T,k,x,Le,6,c[52]),x=y(x,v,T,k,R,10,c[53]),k=y(k,x,v,T,oe,15,c[54]),T=y(T,k,x,v,A,21,c[55]),v=y(v,T,k,x,Z,6,c[56]),x=y(x,v,T,k,Re,10,c[57]),k=y(k,x,v,T,K,15,c[58]),T=y(T,k,x,v,De,21,c[59]),v=y(v,T,k,x,M,6,c[60]),x=y(x,v,T,k,Oe,10,c[61]),k=y(k,x,v,T,E,15,c[62]),T=y(T,k,x,v,le,21,c[63]),b[0]=b[0]+v|0,b[1]=b[1]+T|0,b[2]=b[2]+k|0,b[3]=b[3]+x|0},_doFinalize:function(){var h=this._data,u=h.words,p=8*this._nDataBytes,_=8*h.sigBytes;u[_>>>5]|=128<<24-_%32;var w=i.floor(p/4294967296),b=p;u[15+(_+64>>>9<<4)]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),u[14+(_+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),h.sigBytes=4*(u.length+1),this._process();for(var S=this._hash,A=S.words,E=0;E<4;E++){var R=A[E];A[E]=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8)}return S},clone:function(){var h=r.clone.call(this);return h._hash=this._hash.clone(),h}});function d(h,u,p,_,w,b,S){var A=h+(u&p|~u&_)+w+S;return(A<<b|A>>>32-b)+u}function m(h,u,p,_,w,b,S){var A=h+(u&_|p&~_)+w+S;return(A<<b|A>>>32-b)+u}function g(h,u,p,_,w,b,S){var A=h+(u^p^_)+w+S;return(A<<b|A>>>32-b)+u}function y(h,u,p,_,w,b,S){var A=h+(p^(u|~_))+w+S;return(A<<b|A>>>32-b)+u}s.MD5=r._createHelper(f),s.HmacMD5=r._createHmacHelper(f)}(Math),n.MD5)}),Y(function(t,e){var n;t.exports=(n=ne,void function(){var i=n,s=i.lib.Base,o=i.enc.Utf8;i.algo.HMAC=s.extend({init:function(a,r){a=this._hasher=new a.init,typeof r=="string"&&(r=o.parse(r));var l=a.blockSize,c=4*l;r.sigBytes>c&&(r=a.finalize(r)),r.clamp();for(var f=this._oKey=r.clone(),d=this._iKey=r.clone(),m=f.words,g=d.words,y=0;y<l;y++)m[y]^=1549556828,g[y]^=909522486;f.sigBytes=d.sigBytes=c,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var r=this._hasher,l=r.finalize(a);return r.reset(),r.finalize(this._oKey.clone().concat(l))}})}())}),Y(function(t,e){t.exports=ne.HmacMD5})),Ci=Y(function(t,e){t.exports=ne.enc.Utf8}),Oi=Y(function(t,e){var n;t.exports=(n=ne,function(){var i=n,s=i.lib.WordArray;function o(a,r,l){for(var c=[],f=0,d=0;d<r;d++)if(d%4){var m=l[a.charCodeAt(d-1)]<<d%4*2,g=l[a.charCodeAt(d)]>>>6-d%4*2;c[f>>>2]|=(m|g)<<24-f%4*8,f++}return s.create(c,f)}i.enc.Base64={stringify:function(a){var r=a.words,l=a.sigBytes,c=this._map;a.clamp();for(var f=[],d=0;d<l;d+=3)for(var m=(r[d>>>2]>>>24-d%4*8&255)<<16|(r[d+1>>>2]>>>24-(d+1)%4*8&255)<<8|r[d+2>>>2]>>>24-(d+2)%4*8&255,g=0;g<4&&d+.75*g<l;g++)f.push(c.charAt(m>>>6*(3-g)&63));var y=c.charAt(64);if(y)for(;f.length%4;)f.push(y);return f.join("")},parse:function(a){var r=a.length,l=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var f=0;f<l.length;f++)c[l.charCodeAt(f)]=f}var d=l.charAt(64);if(d){var m=a.indexOf(d);m!==-1&&(r=m)}return o(a,r,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}),Kt="FUNCTION",Li="OBJECT",Di="CLIENT_DB",zt="pending",Ei="fulfilled",Vt="rejected";function xe(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function yn(t){return xe(t)==="object"}function wn(t){return typeof t=="function"}function Ri(t){return function(){try{return t.apply(t,arguments)}catch(e){console.error(e)}}}var Ht="REJECTED",bn="NOT_PENDING",Be=class{constructor({createPromise:e,retryRule:n=Ht}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=n}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case Ht:return this.status===Vt;case bn:return this.status!==zt}}exec(){return this.needRetry?(this.status=zt,this.promise=this.createPromise().then(e=>(this.status=Ei,Promise.resolve(e)),e=>(this.status=Vt,Promise.reject(e))),this.promise):this.promise}};function At(t){return t&&typeof t=="string"?JSON.parse(t):t}var Ni=!1,Ui="app",Mi=At(Si),Ct=Ui;At("");var qi=At("[]")||[],Bi="";try{Bi="__UNI__EF8BC18"}catch(t){}var Ze,qe={};function he(t,e={}){var n,i;return n=qe,i=t,Object.prototype.hasOwnProperty.call(n,i)||(qe[t]=e),qe[t]}function Fi(){return Ze||(Ze=function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;function t(){return this}return t()!==void 0?t():new Function("return this")()}(),Ze)}qe=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};var vn=["invoke","success","fail","complete"],W=he("_globalUniCloudInterceptor");function kn(t,e){W[t]||(W[t]={}),yn(e)&&Object.keys(e).forEach(n=>{vn.indexOf(n)>-1&&function(i,s,o){let a=W[i][s];a||(a=W[i][s]=[]),a.indexOf(o)===-1&&wn(o)&&a.push(o)}(t,n,e[n])})}function ji(t,e){W[t]||(W[t]={}),yn(e)?Object.keys(e).forEach(n=>{vn.indexOf(n)>-1&&function(i,s,o){let a=W[i][s];if(!a)return;let r=a.indexOf(o);r>-1&&a.splice(r,1)}(t,n,e[n])}):delete W[t]}function F(t,e){return t&&t.length!==0?t.reduce((n,i)=>n.then(()=>i(e)),Promise.resolve()):Promise.resolve()}function j(t,e){return W[t]&&W[t][e]||[]}function $i(t){kn("callObject",t)}var et=he("_globalUniCloudListener"),J="response",fe="needLogin",Fe="refreshToken",Wt="clientdb",Ne="cloudfunction",Jt="cloudobject";function Ae(t){return et[t]||(et[t]=[]),et[t]}function tt(t,e){let n=Ae(t);n.includes(e)||n.push(e)}function nt(t,e){let n=Ae(t),i=n.indexOf(e);i!==-1&&n.splice(i,1)}function V(t,e){let n=Ae(t);for(let i=0;i<n.length;i++)(0,n[i])(e)}var it,st=!1;function xn(){return it||(it=new Promise(t=>{st&&t(),function e(){if(typeof getCurrentPages=="function"){let n=getCurrentPages();n&&n[0]&&(st=!0,t())}st||setTimeout(()=>{e()},30)}()}),it)}function Tn(t){let e={};for(let n in t){let i=t[n];wn(i)&&(e[n]=Ri(i))}return e}var I=class extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}},U={request:t=>uni.request(t),uploadFile:t=>uni.uploadFile(t),setStorageSync:(t,e)=>uni.setStorageSync(t,e),getStorageSync:t=>uni.getStorageSync(t),removeStorageSync:t=>uni.removeStorageSync(t),clearStorageSync:()=>uni.clearStorageSync(),connectSocket:t=>uni.connectSocket(t)};function Sn(t){return t&&Sn(t.__v_raw)||t}function Te(){return{token:U.getStorageSync("uni_id_token")||U.getStorageSync("uniIdToken"),tokenExpired:U.getStorageSync("uni_id_token_expired")}}function In({token:t,tokenExpired:e}={}){t&&U.setStorageSync("uni_id_token",t),e&&U.setStorageSync("uni_id_token_expired",e)}var ot,Ue;function Pn(){return ot||(ot=uni.getSystemInfoSync()),ot}function Ki(){let t,e;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;let{scene:n,channel:i}=uni.getLaunchOptionsSync();t=i,e=n}}catch(n){}return{channel:t,scene:e}}var ut={};function dt(){let t=uni.getLocale&&uni.getLocale()||"en";if(Ue)return q(D(D({},ut),Ue),{locale:t,LOCALE:t});let e=Pn(),{deviceId:n,osName:i,uniPlatform:s,appId:o}=e,a=["appId","appLanguage","appName","appVersion","appVersionCode","appWgtVersion","browserName","browserVersion","deviceBrand","deviceId","deviceModel","deviceType","osName","osVersion","romName","romVersion","ua","hostName","hostVersion","uniPlatform","uniRuntimeVersion","uniRuntimeVersionCode","uniCompilerVersion","uniCompilerVersionCode"];for(let r in e)Object.hasOwnProperty.call(e,r)&&a.indexOf(r)===-1&&delete e[r];return Ue=D(D({PLATFORM:s,OS:i,APPID:o,DEVICEID:n},Ki()),e),q(D(D({},ut),Ue),{locale:t,LOCALE:t})}var de={sign:function(t,e){let n="";return Object.keys(t).sort().forEach(function(i){t[i]&&(n=n+"&"+i+"="+t[i])}),n=n.slice(1),Ai(n,e).toString()},wrappedRequest:function(t,e){return new Promise((n,i)=>{e(Object.assign(t,{complete(s){s||(s={});let o=s.data&&s.data.header&&s.data.header["x-serverless-request-id"]||s.header&&s.header["request-id"];if(!s.statusCode||s.statusCode>=400){let r=s.data&&s.data.error&&s.data.error.code||"SYS_ERR",l=s.data&&s.data.error&&s.data.error.message||s.errMsg||"request:fail";return i(new I({code:r,message:l,requestId:o}))}let a=s.data;if(a.error)return i(new I({code:a.error.code,message:a.error.message,requestId:o}));a.result=a.data,a.requestId=o,delete a.data,n(a)}}))})},toBase64:function(t){return Oi.stringify(Ci.parse(t))}},zi=class{constructor(t){["spaceId","clientSecret"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`${e} required`)}),this.config=Object.assign({},{endpoint:t.spaceId.indexOf("mp-")===0?"https://api.next.bspapp.com":"https://api.bspapp.com"},t),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=U,this._getAccessTokenPromiseHub=new Be({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then(e=>{if(!e.result||!e.result.accessToken)throw new I({code:"AUTH_FAILED",message:"\u83B7\u53D6accessToken\u5931\u8D25"});this.setAccessToken(e.result.accessToken)}),retryRule:bn})}get hasAccessToken(){return!!this.accessToken}setAccessToken(t){this.accessToken=t}requestWrapped(t){return de.wrappedRequest(t,this.adapter.request)}requestAuth(t){return this.requestWrapped(t)}request(t,e){return Promise.resolve().then(()=>this.hasAccessToken?e?this.requestWrapped(t):this.requestWrapped(t).catch(n=>new Promise((i,s)=>{!n||n.code!=="GATEWAY_INVALID_TOKEN"&&n.code!=="InvalidParameter.InvalidToken"?s(n):i()}).then(()=>this.getAccessToken()).then(()=>{let i=this.rebuildRequest(t);return this.request(i,!0)})):this.getAccessToken().then(()=>{let n=this.rebuildRequest(t);return this.request(n,!0)}))}rebuildRequest(t){let e=Object.assign({},t);return e.data.token=this.accessToken,e.header["x-basement-token"]=this.accessToken,e.header["x-serverless-sign"]=de.sign(e.data,this.config.clientSecret),e}setupRequest(t,e){let n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};return e!=="auth"&&(n.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=de.sign(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:i}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}authorize(){return L(this,null,function*(){yield this.getAccessToken()})}callFunction(t){let e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:t.name,functionArgs:t.data||{}})};return this.request(q(D({},this.setupRequest(e)),{timeout:t.timeout}))}getOSSUploadOptionsFromPath(t){let e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFileToOSS({url:t,formData:e,name:n,filePath:i,fileType:s,onUploadProgress:o}){return new Promise((a,r)=>{let l=this.adapter.uploadFile({url:t,formData:e,name:n,filePath:i,fileType:s,header:{"X-OSS-server-side-encrpytion":"AES256"},success(c){c&&c.statusCode<400?a(c):r(new I({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(c){r(new I({code:c.code||"UPLOAD_FAILED",message:c.message||c.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof o=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(c=>{o({loaded:c.totalBytesSent,total:c.totalBytesExpectedToSend})})})}reportOSSUpload(t){let e={method:"serverless.file.resource.report",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFile(a){return L(this,arguments,function*({filePath:t,cloudPath:e,fileType:n="image",cloudPathAsRealPath:i=!1,onUploadProgress:s,config:o}){if(xe(e)!=="string")throw new I({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new I({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new I({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let r=o&&o.envType||this.config.envType;if(i&&(e[0]!=="/"&&(e="/"+e),e.indexOf("\\")>-1))throw new I({code:"INVALID_PARAM",message:"\u4F7F\u7528cloudPath\u4F5C\u4E3A\u8DEF\u5F84\u65F6\uFF0CcloudPath\u4E0D\u53EF\u5305\u542B\u201C\\\u201D"});let l=(yield this.getOSSUploadOptionsFromPath({env:r,filename:i?e.split("/").pop():e,fileId:i?e:void 0})).result,c="https://"+l.cdnDomain+"/"+l.ossPath,{securityToken:f,accessKeyId:d,signature:m,host:g,ossPath:y,id:h,policy:u,ossCallbackUrl:p}=l,_={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:d,Signature:m,host:g,id:h,key:y,policy:u,success_action_status:200};if(f&&(_["x-oss-security-token"]=f),p){let b=JSON.stringify({callbackUrl:p,callbackBody:JSON.stringify({fileId:h,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});_.callback=de.toBase64(b)}let w={url:"https://"+l.host,formData:_,fileName:"file",name:"file",filePath:t,fileType:n};if(yield this.uploadFileToOSS(Object.assign({},w,{onUploadProgress:s})),p)return{success:!0,filePath:t,fileID:c};if((yield this.reportOSSUpload({id:h})).success)return{success:!0,filePath:t,fileID:c};throw new I({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"})})}getTempFileURL({fileList:t}={}){return new Promise((e,n)=>{Array.isArray(t)&&t.length!==0||n(new I({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"})),e({fileList:t.map(i=>({fileID:i,tempFileURL:i}))})})}getFileInfo(){return L(this,arguments,function*({fileList:t}={}){if(!Array.isArray(t)||t.length===0)throw new I({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let e={method:"serverless.file.resource.info",params:JSON.stringify({id:t.map(n=>n.split("?")[0]).join(",")})};return{fileList:(yield this.request(this.setupRequest(e))).result}})}},Vi={init(t){let e=new zi(t),n={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},Hi=typeof location!="undefined"&&location.protocol==="http:"?"http:":"https:",Yt;(function(t){t.local="local",t.none="none",t.session="session"})(Yt||(Yt={}));var Wi=function(){},Ji=Y(function(t,e){var n;t.exports=(n=ne,function(i){var s=n,o=s.lib,a=o.WordArray,r=o.Hasher,l=s.algo,c=[],f=[];(function(){function g(p){for(var _=i.sqrt(p),w=2;w<=_;w++)if(!(p%w))return!1;return!0}function y(p){return 4294967296*(p-(0|p))|0}for(var h=2,u=0;u<64;)g(h)&&(u<8&&(c[u]=y(i.pow(h,.5))),f[u]=y(i.pow(h,1/3)),u++),h++})();var d=[],m=l.SHA256=r.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(g,y){for(var h=this._hash.words,u=h[0],p=h[1],_=h[2],w=h[3],b=h[4],S=h[5],A=h[6],E=h[7],R=0;R<64;R++){if(R<16)d[R]=0|g[y+R];else{var M=d[R-15],Q=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,K=d[R-2],se=(K<<15|K>>>17)^(K<<13|K>>>19)^K>>>10;d[R]=Q+d[R-7]+se+d[R-16]}var Z=u&p^u&_^p&_,le=(u<<30|u>>>2)^(u<<19|u>>>13)^(u<<10|u>>>22),oe=E+((b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25))+(b&S^~b&A)+f[R]+d[R];E=A,A=S,S=b,b=w+oe|0,w=_,_=p,p=u,u=oe+(le+Z)|0}h[0]=h[0]+u|0,h[1]=h[1]+p|0,h[2]=h[2]+_|0,h[3]=h[3]+w|0,h[4]=h[4]+b|0,h[5]=h[5]+S|0,h[6]=h[6]+A|0,h[7]=h[7]+E|0},_doFinalize:function(){var g=this._data,y=g.words,h=8*this._nDataBytes,u=8*g.sigBytes;return y[u>>>5]|=128<<24-u%32,y[14+(u+64>>>9<<4)]=i.floor(h/4294967296),y[15+(u+64>>>9<<4)]=h,g.sigBytes=4*y.length,this._process(),this._hash},clone:function(){var g=r.clone.call(this);return g._hash=this._hash.clone(),g}});s.SHA256=r._createHelper(m),s.HmacSHA256=r._createHmacHelper(m)}(Math),n.SHA256)}),ht=Ji,An=Y(function(t,e){t.exports=ne.HmacSHA256}),Ce=()=>{let t;if(!Promise){t=()=>{},t.promise={};let n=()=>{throw new I({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(t.promise,"then",{get:n}),Object.defineProperty(t.promise,"catch",{get:n}),t}let e=new Promise((n,i)=>{t=(s,o)=>s?i(s):n(o)});return t.promise=e,t};function Yi(t){return t===void 0}function Gi(t){return Object.prototype.toString.call(t)==="[object Null]"}function Gt(t=""){return t.replace(/([\s\S]+)\s+(请前往云开发AI小助手查看问题：.*)/,"$1")}function Xt(t=32){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,i="";for(let s=0;s<t;s++)i+=e.charAt(Math.floor(Math.random()*n));return i}var Qt;function Xi(t){let e=(n=t,Object.prototype.toString.call(n)==="[object Array]"?t:[t]);var n;for(let i of e){let{isMatch:s,genAdapter:o,runtime:a}=i;if(s())return{adapter:o(),runtime:a}}}(function(t){t.WEB="web",t.WX_MP="wx_mp"})(Qt||(Qt={}));var B={adapter:null,runtime:void 0},Qi=["anonymousUuidKey"],be=class extends Wi{constructor(){super(),B.adapter.root.tcbObject||(B.adapter.root.tcbObject={})}setItem(e,n){B.adapter.root.tcbObject[e]=n}getItem(e){return B.adapter.root.tcbObject[e]}removeItem(e){delete B.adapter.root.tcbObject[e]}clear(){delete B.adapter.root.tcbObject}};function Zt(t,e){switch(t){case"local":return e.localStorage||new be;case"none":return new be;default:return e.sessionStorage||new be}}var je=class{constructor(e){if(!this._storage){this._persistence=B.adapter.primaryStorage||e.persistence,this._storage=Zt(this._persistence,B.adapter);let n=`access_token_${e.env}`,i=`access_token_expire_${e.env}`,s=`refresh_token_${e.env}`,o=`anonymous_uuid_${e.env}`,a=`login_type_${e.env}`,r="device_id",l=`token_type_${e.env}`,c=`user_info_${e.env}`;this.keys={accessTokenKey:n,accessTokenExpireKey:i,refreshTokenKey:s,anonymousUuidKey:o,loginTypeKey:a,userInfoKey:c,deviceIdKey:r,tokenTypeKey:l}}}updatePersistence(e){if(e===this._persistence)return;let n=this._persistence==="local";this._persistence=e;let i=Zt(e,B.adapter);for(let s in this.keys){let o=this.keys[s];if(n&&Qi.includes(s))continue;let a=this._storage.getItem(o);Yi(a)||Gi(a)||(i.setItem(o,a),this._storage.removeItem(o))}this._storage=i}setStore(e,n,i){if(!this._storage)return;let s={version:i||"localCachev1",content:n},o=JSON.stringify(s);try{this._storage.setItem(e,o)}catch(a){throw a}}getStore(e,n){try{if(!this._storage)return}catch(s){return""}n=n||"localCachev1";let i=this._storage.getItem(e);return i&&i.indexOf(n)>=0?JSON.parse(i).content:""}removeStore(e){this._storage.removeItem(e)}},Cn={},On={};function ge(t){return Cn[t]}var $e=class{constructor(e,n){this.data=n||null,this.name=e}},ft=class extends $e{constructor(e,n){super("error",{error:e,data:n}),this.error=e}},Ot=new class{constructor(){this._listeners={}}on(t,e){return function(n,i,s){s[n]=s[n]||[],s[n].push(i)}(t,e,this._listeners),this}off(t,e){return function(n,i,s){if(s&&s[n]){let o=s[n].indexOf(i);o!==-1&&s[n].splice(o,1)}}(t,e,this._listeners),this}fire(t,e){if(t instanceof ft)return console.error(t.error),this;let n=typeof t=="string"?new $e(t,e||{}):t,i=n.name;if(this._listens(i)){n.target=this;let s=this._listeners[i]?[...this._listeners[i]]:[];for(let o of s)o.call(this,n)}return this}_listens(t){return this._listeners[t]&&this._listeners[t].length>0}};function te(t,e){Ot.on(t,e)}function $(t,e={}){Ot.fire(t,e)}function Zi(t,e){Ot.off(t,e)}var pe="loginStateChanged",Ln="loginStateExpire",ie="loginTypeChanged",pt="anonymousConverted",Dn="refreshAccessToken",N;(function(t){t.ANONYMOUS="ANONYMOUS",t.WECHAT="WECHAT",t.WECHAT_PUBLIC="WECHAT-PUBLIC",t.WECHAT_OPEN="WECHAT-OPEN",t.CUSTOM="CUSTOM",t.EMAIL="EMAIL",t.USERNAME="USERNAME",t.NULL="NULL"})(N||(N={}));var mt=class{constructor(){this._fnPromiseMap=new Map}run(e,n){return L(this,null,function*(){let i=this._fnPromiseMap.get(e);return i||(i=new Promise((s,o)=>L(this,null,function*(){try{yield this._runIdlePromise();let a=n();s(yield a)}catch(a){o(a)}finally{this._fnPromiseMap.delete(e)}})),this._fnPromiseMap.set(e,i)),i})}_runIdlePromise(){return Promise.resolve()}},gt=class{constructor(e){this._singlePromise=new mt,this._cache=ge(e.env),this._baseURL=`https://${e.env}.ap-shanghai.tcb-api.tencentcloudapi.com`,this._reqClass=new B.adapter.reqClass({timeout:e.timeout,timeoutMsg:`\u8BF7\u6C42\u5728${e.timeout/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`,restrictedMethods:["post"]})}_getDeviceId(){if(this._deviceID)return this._deviceID;let{deviceIdKey:e}=this._cache.keys,n=this._cache.getStore(e);return typeof n=="string"&&n.length>=16&&n.length<=48||(n=Xt(),this._cache.setStore(e,n)),this._deviceID=n,n}_request(s,o){return L(this,arguments,function*(e,n,i={}){let a={"x-request-id":Xt(),"x-device-id":this._getDeviceId()};if(i.withAccessToken){let{tokenTypeKey:r}=this._cache.keys,l=yield this.getAccessToken(),c=this._cache.getStore(r);a.authorization=`${c} ${l}`}return this._reqClass[i.method==="get"?"get":"post"]({url:`${this._baseURL}${e}`,data:n,headers:a})})}_fetchAccessToken(){return L(this,null,function*(){let{loginTypeKey:e,accessTokenKey:n,accessTokenExpireKey:i,tokenTypeKey:s}=this._cache.keys,o=this._cache.getStore(e);if(o&&o!==N.ANONYMOUS)throw new I({code:"INVALID_OPERATION",message:"\u975E\u533F\u540D\u767B\u5F55\u4E0D\u652F\u6301\u5237\u65B0 access token"});let a=yield this._singlePromise.run("fetchAccessToken",()=>L(this,null,function*(){return(yield this._request("/auth/v1/signin/anonymously",{},{method:"post"})).data})),{access_token:r,expires_in:l,token_type:c}=a;return this._cache.setStore(s,c),this._cache.setStore(n,r),this._cache.setStore(i,Date.now()+1e3*l),r})}isAccessTokenExpired(e,n){let i=!0;return e&&n&&(i=n<Date.now()),i}getAccessToken(){return L(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n}=this._cache.keys,i=this._cache.getStore(e),s=this._cache.getStore(n);return this.isAccessTokenExpired(i,s)?this._fetchAccessToken():i})}refreshAccessToken(){return L(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n,loginTypeKey:i}=this._cache.keys;return this._cache.removeStore(e),this._cache.removeStore(n),this._cache.setStore(i,N.ANONYMOUS),this.getAccessToken()})}getUserInfo(){return L(this,null,function*(){return this._singlePromise.run("getUserInfo",()=>L(this,null,function*(){return(yield this._request("/auth/v1/user/me",{},{withAccessToken:!0,method:"get"})).data}))})}},en=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],es={"X-SDK-Version":"1.3.5"};function at(t,e,n){let i=t[e];t[e]=function(s){let o={},a={};n.forEach(l=>{let{data:c,headers:f}=l.call(t,s);Object.assign(o,c),Object.assign(a,f)});let r=s.data;return r&&(()=>{var l;if(l=r,Object.prototype.toString.call(l)!=="[object FormData]")s.data=D(D({},r),o);else for(let c in o)r.append(c,o[c])})(),s.headers=D(D({},s.headers||{}),a),i.call(t,s)}}function rt(){let t=Math.random().toString(16).slice(2);return{data:{seqId:t},headers:q(D({},es),{"x-seqid":t})}}var _t=class{constructor(e={}){var n;this.config=e,this._reqClass=new B.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`\u8BF7\u6C42\u5728${this.config.timeout/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`,restrictedMethods:["post"]}),this._cache=ge(this.config.env),this._localCache=(n=this.config.env,On[n]),this.oauth=new gt(this.config),at(this._reqClass,"post",[rt]),at(this._reqClass,"upload",[rt]),at(this._reqClass,"download",[rt])}post(e){return L(this,null,function*(){return yield this._reqClass.post(e)})}upload(e){return L(this,null,function*(){return yield this._reqClass.upload(e)})}download(e){return L(this,null,function*(){return yield this._reqClass.download(e)})}refreshAccessToken(){return L(this,null,function*(){let e,n;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=yield this._refreshAccessTokenPromise}catch(i){n=i}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,n)throw n;return e})}_refreshAccessToken(){return L(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n,refreshTokenKey:i,loginTypeKey:s,anonymousUuidKey:o}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(n);let a=this._cache.getStore(i);if(!a)throw new I({message:"\u672A\u767B\u5F55CloudBase"});let r={refresh_token:a},l=yield this.request("auth.fetchAccessTokenWithRefreshToken",r);if(l.data.code){let{code:c}=l.data;if(c==="SIGN_PARAM_INVALID"||c==="REFRESH_TOKEN_EXPIRED"||c==="INVALID_REFRESH_TOKEN"){if(this._cache.getStore(s)===N.ANONYMOUS&&c==="INVALID_REFRESH_TOKEN"){let f=this._cache.getStore(o),d=this._cache.getStore(i),m=yield this.send("auth.signInAnonymously",{anonymous_uuid:f,refresh_token:d});return this.setRefreshToken(m.refresh_token),this._refreshAccessToken()}$(Ln),this._cache.removeStore(i)}throw new I({code:l.data.code,message:`\u5237\u65B0access token\u5931\u8D25\uFF1A${l.data.code}`})}if(l.data.access_token)return $(Dn),this._cache.setStore(e,l.data.access_token),this._cache.setStore(n,l.data.access_token_expire+Date.now()),{accessToken:l.data.access_token,accessTokenExpire:l.data.access_token_expire};l.data.refresh_token&&(this._cache.removeStore(i),this._cache.setStore(i,l.data.refresh_token),this._refreshAccessToken())})}getAccessToken(){return L(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n,refreshTokenKey:i}=this._cache.keys;if(!this._cache.getStore(i))throw new I({message:"refresh token\u4E0D\u5B58\u5728\uFF0C\u767B\u5F55\u72B6\u6001\u5F02\u5E38"});let s=this._cache.getStore(e),o=this._cache.getStore(n),a=!0;return this._shouldRefreshAccessTokenHook&&!(yield this._shouldRefreshAccessTokenHook(s,o))&&(a=!1),(!s||!o||o<Date.now())&&a?this.refreshAccessToken():{accessToken:s,accessTokenExpire:o}})}request(e,n,i){return L(this,null,function*(){let s=`x-tcb-trace_${this.config.env}`,o="application/x-www-form-urlencoded",a=D({action:e,env:this.config.env,dataVersion:"2019-08-16"},n),r;if(en.indexOf(e)===-1&&(this._cache.keys,a.access_token=yield this.oauth.getAccessToken()),e==="storage.uploadFile"){r=new FormData;for(let p in r)r.hasOwnProperty(p)&&r[p]!==void 0&&r.append(p,a[p]);o="multipart/form-data"}else{o="application/json",r={};for(let p in a)a[p]!==void 0&&(r[p]=a[p])}let l={headers:{"content-type":o}};i&&i.timeout&&(l.timeout=i.timeout),i&&i.onUploadProgress&&(l.onUploadProgress=i.onUploadProgress);let c=this._localCache.getStore(s);c&&(l.headers["X-TCB-Trace"]=c);let{parse:f,inQuery:d,search:m}=n,g={env:this.config.env};f&&(g.parse=!0),d&&(g=D(D({},d),g));let y=function(p,_,w={}){let b=/\?/.test(_),S="";for(let A in w)S===""?!b&&(_+="?"):S+="&",S+=`${A}=${encodeURIComponent(w[A])}`;return/^http(s)?\:\/\//.test(_+=S)?_:`${p}${_}`}(Hi,"//tcb-api.tencentcloudapi.com/web",g);m&&(y+=m);let h=yield this.post(D({url:y,data:r},l)),u=h.header&&h.header["x-tcb-trace"];if(u&&this._localCache.setStore(s,u),Number(h.status)!==200&&Number(h.statusCode)!==200||!h.data)throw new I({code:"NETWORK_ERROR",message:"network request error"});return h})}send(s){return L(this,arguments,function*(e,n={},i={}){let o=yield this.request(e,n,q(D({},i),{onUploadProgress:n.onUploadProgress}));if((o.data.code==="ACCESS_TOKEN_DISABLED"||o.data.code==="ACCESS_TOKEN_EXPIRED")&&en.indexOf(e)===-1){yield this.oauth.refreshAccessToken();let a=yield this.request(e,n,q(D({},i),{onUploadProgress:n.onUploadProgress}));if(a.data.code)throw new I({code:a.data.code,message:Gt(a.data.message)});return a.data}if(o.data.code)throw new I({code:o.data.code,message:Gt(o.data.message)});return o.data})}setRefreshToken(e){let{accessTokenKey:n,accessTokenExpireKey:i,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(n),this._cache.removeStore(i),this._cache.setStore(s,e)}},En={};function X(t){return En[t]}var me=class{constructor(e){this.config=e,this._cache=ge(e.env),this._request=X(e.env)}setRefreshToken(e){let{accessTokenKey:n,accessTokenExpireKey:i,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(n),this._cache.removeStore(i),this._cache.setStore(s,e)}setAccessToken(e,n){let{accessTokenKey:i,accessTokenExpireKey:s}=this._cache.keys;this._cache.setStore(i,e),this._cache.setStore(s,n)}refreshUserInfo(){return L(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setLocalUserInfo(e){let{userInfoKey:n}=this._cache.keys;this._cache.setStore(n,e)}},yt=class{constructor(e){if(!e)throw new I({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=ge(this._envId),this._request=X(this._envId),this.setUserInfo()}linkWithTicket(e){if(typeof e!="string")throw new I({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,n){return this._request.send("auth.updatePassword",{oldPassword:n,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if(typeof e!="string")throw new I({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}getLinkedUidList(){return L(this,null,function*(){let{data:e}=yield this._request.send("auth.getLinkedUidList",{}),n=!1,{users:i}=e;return i.forEach(s=>{s.wxOpenId&&s.wxPublicId&&(n=!0)}),{users:i,hasPrimaryUid:n}})}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}update(e){return L(this,null,function*(){let{nickName:n,gender:i,avatarUrl:s,province:o,country:a,city:r}=e,{data:l}=yield this._request.send("auth.updateUserInfo",{nickName:n,gender:i,avatarUrl:s,province:o,country:a,city:r});this.setLocalUserInfo(l)})}refresh(){return L(this,null,function*(){let e=yield this._request.oauth.getUserInfo();return this.setLocalUserInfo(e),e})}setUserInfo(){let{userInfoKey:e}=this._cache.keys,n=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach(i=>{this[i]=n[i]}),this.location={country:n.country,province:n.province,city:n.city}}setLocalUserInfo(e){let{userInfoKey:n}=this._cache.keys;this._cache.setStore(n,e),this.setUserInfo()}},ce=class{constructor(e){if(!e)throw new I({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=ge(e);let{refreshTokenKey:n,accessTokenKey:i,accessTokenExpireKey:s}=this._cache.keys,o=this._cache.getStore(n),a=this._cache.getStore(i),r=this._cache.getStore(s);this.credential={refreshToken:o,accessToken:a,accessTokenExpire:r},this.user=new yt(e)}get isAnonymousAuth(){return this.loginType===N.ANONYMOUS}get isCustomAuth(){return this.loginType===N.CUSTOM}get isWeixinAuth(){return this.loginType===N.WECHAT||this.loginType===N.WECHAT_OPEN||this.loginType===N.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},ve=class extends me{signIn(){return L(this,null,function*(){this._cache.updatePersistence("local"),yield this._request.oauth.getAccessToken(),$(pe),$(ie,{env:this.config.env,loginType:N.ANONYMOUS,persistence:"local"});let e=new ce(this.config.env);return yield e.user.refresh(),e})}linkAndRetrieveDataWithTicket(e){return L(this,null,function*(){let{anonymousUuidKey:n,refreshTokenKey:i}=this._cache.keys,s=this._cache.getStore(n),o=this._cache.getStore(i),a=yield this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:s,refresh_token:o,ticket:e});if(a.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(a.refresh_token),yield this._request.refreshAccessToken(),$(pt,{env:this.config.env}),$(ie,{loginType:N.CUSTOM,persistence:"local"}),{credential:{refreshToken:a.refresh_token}};throw new I({message:"\u533F\u540D\u8F6C\u5316\u5931\u8D25"})})}_setAnonymousUUID(e){let{anonymousUuidKey:n,loginTypeKey:i}=this._cache.keys;this._cache.removeStore(n),this._cache.setStore(n,e),this._cache.setStore(i,N.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}},Ke=class extends me{signIn(e){return L(this,null,function*(){if(typeof e!="string")throw new I({code:"PARAM_ERROR",message:"ticket must be a string"});let{refreshTokenKey:n}=this._cache.keys,i=yield this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(n)||""});if(i.refresh_token)return this.setRefreshToken(i.refresh_token),yield this._request.refreshAccessToken(),$(pe),$(ie,{env:this.config.env,loginType:N.CUSTOM,persistence:this.config.persistence}),yield this.refreshUserInfo(),new ce(this.config.env);throw new I({message:"\u81EA\u5B9A\u4E49\u767B\u5F55\u5931\u8D25"})})}},ze=class extends me{signIn(e,n){return L(this,null,function*(){if(typeof e!="string")throw new I({code:"PARAM_ERROR",message:"email must be a string"});let{refreshTokenKey:i}=this._cache.keys,s=yield this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:n,refresh_token:this._cache.getStore(i)||""}),{refresh_token:o,access_token:a,access_token_expire:r}=s;if(o)return this.setRefreshToken(o),a&&r?this.setAccessToken(a,r):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),$(pe),$(ie,{env:this.config.env,loginType:N.EMAIL,persistence:this.config.persistence}),new ce(this.config.env);throw s.code?new I({code:s.code,message:`\u90AE\u7BB1\u767B\u5F55\u5931\u8D25: ${s.message}`}):new I({message:"\u90AE\u7BB1\u767B\u5F55\u5931\u8D25"})})}activate(e){return L(this,null,function*(){return this._request.send("auth.activateEndUserMail",{token:e})})}resetPasswordWithToken(e,n){return L(this,null,function*(){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:n})})}},Ve=class extends me{signIn(e,n){return L(this,null,function*(){if(typeof e!="string")throw new I({code:"PARAM_ERROR",message:"username must be a string"});typeof n!="string"&&(n="",console.warn("password is empty"));let{refreshTokenKey:i}=this._cache.keys,s=yield this._request.send("auth.signIn",{loginType:N.USERNAME,username:e,password:n,refresh_token:this._cache.getStore(i)||""}),{refresh_token:o,access_token_expire:a,access_token:r}=s;if(o)return this.setRefreshToken(o),r&&a?this.setAccessToken(r,a):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),$(pe),$(ie,{env:this.config.env,loginType:N.USERNAME,persistence:this.config.persistence}),new ce(this.config.env);throw s.code?new I({code:s.code,message:`\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25: ${s.message}`}):new I({message:"\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25"})})}},wt=class{constructor(e){this.config=e,this._cache=ge(e.env),this._request=X(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),te(ie,this._onLoginTypeChanged)}get currentUser(){let e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new ve(this.config)}customAuthProvider(){return new Ke(this.config)}emailAuthProvider(){return new ze(this.config)}usernameAuthProvider(){return new Ve(this.config)}signInAnonymously(){return L(this,null,function*(){return new ve(this.config).signIn()})}signInWithEmailAndPassword(e,n){return L(this,null,function*(){return new ze(this.config).signIn(e,n)})}signInWithUsernameAndPassword(e,n){return new Ve(this.config).signIn(e,n)}linkAndRetrieveDataWithTicket(e){return L(this,null,function*(){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new ve(this.config)),te(pt,this._onAnonymousConverted),yield this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)})}signOut(){return L(this,null,function*(){if(this.loginType===N.ANONYMOUS)throw new I({message:"\u533F\u540D\u7528\u6237\u4E0D\u652F\u6301\u767B\u51FA\u64CD\u4F5C"});let{refreshTokenKey:e,accessTokenKey:n,accessTokenExpireKey:i}=this._cache.keys,s=this._cache.getStore(e);if(!s)return;let o=yield this._request.send("auth.logout",{refresh_token:s});return this._cache.removeStore(e),this._cache.removeStore(n),this._cache.removeStore(i),$(pe),$(ie,{env:this.config.env,loginType:N.NULL,persistence:this.config.persistence}),o})}signUpWithEmailAndPassword(e,n){return L(this,null,function*(){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:n})})}sendPasswordResetEmail(e){return L(this,null,function*(){return this._request.send("auth.sendPasswordResetEmail",{email:e})})}onLoginStateChanged(e){te(pe,()=>{let i=this.hasLoginState();e.call(this,i)});let n=this.hasLoginState();e.call(this,n)}onLoginStateExpired(e){te(Ln,e.bind(this))}onAccessTokenRefreshed(e){te(Dn,e.bind(this))}onAnonymousConverted(e){te(pt,e.bind(this))}onLoginTypeChanged(e){te(ie,()=>{let n=this.hasLoginState();e.call(this,n)})}getAccessToken(){return L(this,null,function*(){return{accessToken:(yield this._request.getAccessToken()).accessToken,env:this.config.env}})}hasLoginState(){let{accessTokenKey:e,accessTokenExpireKey:n}=this._cache.keys,i=this._cache.getStore(e),s=this._cache.getStore(n);return this._request.oauth.isAccessTokenExpired(i,s)?null:new ce(this.config.env)}isUsernameRegistered(e){return L(this,null,function*(){if(typeof e!="string")throw new I({code:"PARAM_ERROR",message:"username must be a string"});let{data:n}=yield this._request.send("auth.isUsernameRegistered",{username:e});return n&&n.isRegistered})}getLoginState(){return Promise.resolve(this.hasLoginState())}signInWithTicket(e){return L(this,null,function*(){return new Ke(this.config).signIn(e)})}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then(e=>e.code?e:q(D({},e.data),{requestId:e.seqId}))}getAuthHeader(){let{refreshTokenKey:e,accessTokenKey:n}=this._cache.keys,i=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(n)+"/@@/"+i}}_onAnonymousConverted(e){let{env:n}=e.data;n===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){let{loginType:n,persistence:i,env:s}=e.data;s===this.config.env&&(this._cache.updatePersistence(i),this._cache.setStore(this._cache.keys.loginTypeKey,n))}},ts=function(t,e){e=e||Ce();let n=X(this.config.env),{cloudPath:i,filePath:s,onUploadProgress:o,fileType:a="image"}=t;return n.send("storage.getUploadMetadata",{path:i}).then(r=>{let{data:{url:l,authorization:c,token:f,fileId:d,cosFileId:m},requestId:g}=r,y={key:i,signature:c,"x-cos-meta-fileid":m,success_action_status:"201","x-cos-security-token":f};n.upload({url:l,data:y,file:s,name:i,fileType:a,onUploadProgress:o}).then(h=>{h.statusCode===201?e(null,{fileID:d,requestId:g}):e(new I({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${h.data}`}))}).catch(h=>{e(h)})}).catch(r=>{e(r)}),e.promise},ns=function(t,e){e=e||Ce();let n=X(this.config.env),{cloudPath:i}=t;return n.send("storage.getUploadMetadata",{path:i}).then(s=>{e(null,s)}).catch(s=>{e(s)}),e.promise},is=function({fileList:t},e){if(e=e||Ce(),!t||!Array.isArray(t))return{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"};for(let i of t)if(!i||typeof i!="string")return{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"};let n={fileid_list:t};return X(this.config.env).send("storage.batchDeleteFile",n).then(i=>{i.code?e(null,i):e(null,{fileList:i.data.delete_list,requestId:i.requestId})}).catch(i=>{e(i)}),e.promise},Rn=function({fileList:t},e){e=e||Ce(),t&&Array.isArray(t)||e(null,{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"});let n=[];for(let s of t)typeof s=="object"?(s.hasOwnProperty("fileID")&&s.hasOwnProperty("maxAge")||e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5305\u542BfileID\u548CmaxAge\u7684\u5BF9\u8C61"}),n.push({fileid:s.fileID,max_age:s.maxAge})):typeof s=="string"?n.push({fileid:s}):e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5B57\u7B26\u4E32"});let i={file_list:n};return X(this.config.env).send("storage.batchGetDownloadUrl",i).then(s=>{s.code?e(null,s):e(null,{fileList:s.data.download_list,requestId:s.requestId})}).catch(s=>{e(s)}),e.promise},ss=function(n,i){return L(this,arguments,function*({fileID:t},e){let s=(yield Rn.call(this,{fileList:[{fileID:t,maxAge:600}]})).fileList[0];if(s.code!=="SUCCESS")return e?e(s):new Promise(r=>{r(s)});let o=X(this.config.env),a=s.download_url;if(a=encodeURI(a),!e)return o.download({url:a});e(yield o.download({url:a}))})},os=function({name:t,data:e,query:n,parse:i,search:s,timeout:o},a){let r=a||Ce(),l;try{l=e?JSON.stringify(e):""}catch(f){return Promise.reject(f)}if(!t)return Promise.reject(new I({code:"PARAM_ERROR",message:"\u51FD\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"}));let c={inQuery:n,parse:i,search:s,function_name:t,request_data:l};return X(this.config.env).send("functions.invokeFunction",c,{timeout:o}).then(f=>{if(f.code)r(null,f);else{let d=f.data.response_data;if(i)r(null,{result:d,requestId:f.requestId});else try{d=JSON.parse(f.data.response_data),r(null,{result:d,requestId:f.requestId})}catch(m){r(new I({message:"response data must be json"}))}}return r.promise}).catch(f=>{r(f)}),r.promise},tn={timeout:15e3,persistence:"session"},nn={},bt=class t{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(B.adapter||(this.requestClient=new B.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`\u8BF7\u6C42\u5728${(e.timeout||5e3)/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`})),this.config=D(D({},tn),e),!0){case this.config.timeout>6e5:console.warn("timeout\u5927\u4E8E\u53EF\u914D\u7F6E\u4E0A\u9650[10\u5206\u949F]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0A\u9650\u6570\u503C"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout\u5C0F\u4E8E\u53EF\u914D\u7F6E\u4E0B\u9650[100ms]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0B\u9650\u6570\u503C"),this.config.timeout=100}return new t(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;let n=e||B.adapter.primaryStorage||tn.persistence;var i;return n!==this.config.persistence&&(this.config.persistence=n),function(s){let{env:o}=s;Cn[o]=new je(s),On[o]=new je(q(D({},s),{persistence:"local"}))}(this.config),i=this.config,En[i.env]=new _t(i),this.authObj=new wt(this.config),this.authObj}on(e,n){return te.apply(this,[e,n])}off(e,n){return Zi.apply(this,[e,n])}callFunction(e,n){return os.apply(this,[e,n])}deleteFile(e,n){return is.apply(this,[e,n])}getTempFileURL(e,n){return Rn.apply(this,[e,n])}downloadFile(e,n){return ss.apply(this,[e,n])}uploadFile(e,n){return ts.apply(this,[e,n])}getUploadMetadata(e,n){return ns.apply(this,[e,n])}registerExtension(e){nn[e.name]=e}invokeExtension(e,n){return L(this,null,function*(){let i=nn[e];if(!i)throw new I({message:`\u6269\u5C55${e} \u5FC5\u987B\u5148\u6CE8\u518C`});return yield i.invoke(n,this)})}useAdapters(e){let{adapter:n,runtime:i}=Xi(e)||{};n&&(B.adapter=n),i&&(B.runtime=i)}},Nn=new bt;function ct(t,e,n){n===void 0&&(n={});var i=/\?/.test(e),s="";for(var o in n)s===""?!i&&(e+="?"):s+="&",s+=o+"="+encodeURIComponent(n[o]);return/^http(s)?:\/\//.test(e+=s)?e:""+t+e}var vt=class{get(e){let{url:n,data:i,headers:s,timeout:o}=e;return new Promise((a,r)=>{U.request({url:ct("https:",n),data:i,method:"GET",header:s,timeout:o,success(l){a(l)},fail(l){r(l)}})})}post(e){let{url:n,data:i,headers:s,timeout:o}=e;return new Promise((a,r)=>{U.request({url:ct("https:",n),data:i,method:"POST",header:s,timeout:o,success(l){a(l)},fail(l){r(l)}})})}upload(e){return new Promise((n,i)=>{let{url:s,file:o,data:a,headers:r,fileType:l}=e,c=U.uploadFile({url:ct("https:",s),name:"file",formData:Object.assign({},a),filePath:o,fileType:l,header:r,success(f){let d={statusCode:f.statusCode,data:f.data||{}};f.statusCode===200&&a.success_action_status&&(d.statusCode=parseInt(a.success_action_status,10)),n(d)},fail(f){i(new Error(f.errMsg||"uploadFile:fail"))}});typeof e.onUploadProgress=="function"&&c&&typeof c.onProgressUpdate=="function"&&c.onProgressUpdate(f=>{e.onUploadProgress({loaded:f.totalBytesSent,total:f.totalBytesExpectedToSend})})})}},as={setItem(t,e){U.setStorageSync(t,e)},getItem:t=>U.getStorageSync(t),removeItem(t){U.removeStorageSync(t)},clear(){U.clearStorageSync()}},rs={genAdapter:function(){return{root:{},reqClass:vt,localStorage:as,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Nn.useAdapters(rs);var Lt=Nn,cs=Lt.init;Lt.init=function(t){t.env=t.spaceId;let e=cs.call(this,t);e.config.provider="tencent",e.config.spaceId=t.spaceId;let n=e.auth;return e.auth=function(i){let s=n.call(this,i);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach(o=>{var a;s[o]=(a=s[o],function(r){r=r||{};let{success:l,fail:c,complete:f}=Tn(r);if(!(l||c||f))return a.call(this,r);a.call(this,r).then(d=>{l&&l(d),f&&f(d)},d=>{c&&c(d),f&&f(d)})}).bind(s)}),s},e.customAuth=e.auth,e};var sn=Lt;function ls(t,e){return L(this,null,function*(){let n=`http://${t}:${e}/system/ping`;try{let s=yield(i={url:n,timeout:500},new Promise((o,a)=>{U.request(q(D({},i),{success(r){o(r)},fail(r){a(r)}}))}));return!(!s.data||s.data.code!==0)}catch(s){return!1}var i})}function us(t,e){return L(this,null,function*(){let n;for(let i=0;i<t.length;i++){let s=t[i];if(yield ls(s,e)){n=s;break}}return{address:n,port:e}})}var ds={"serverless.file.resource.generateProximalSign":"storage/generate-proximal-sign","serverless.file.resource.report":"storage/report","serverless.file.resource.delete":"storage/delete","serverless.file.resource.getTempFileURL":"storage/get-temp-file-url"},hs=class{constructor(t){if(["spaceId","clientSecret"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`${e} required`)}),!t.endpoint)throw new Error("\u96C6\u7FA4\u7A7A\u95F4\u672A\u914D\u7F6EApiEndpoint\uFF0C\u914D\u7F6E\u540E\u9700\u8981\u91CD\u65B0\u5173\u8054\u670D\u52A1\u7A7A\u95F4\u540E\u751F\u6548");this.config=Object.assign({},t),this.config.provider="dcloud",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.adapter=U}request(t,e=!0){return L(this,null,function*(){return t=this.setupRequest(t),Promise.resolve().then(()=>de.wrappedRequest(t,this.adapter.request))})}requestLocal(t){return new Promise((e,n)=>{this.adapter.request(Object.assign(t,{complete(i){if(i||(i={}),!i.statusCode||i.statusCode>=400){let s=i.data&&i.data.code||"SYS_ERR",o=i.data&&i.data.message||"request:fail";return n(new I({code:s,message:o}))}e({success:!0,result:i.data})}}))})}setupRequest(t){let e=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),n={"Content-Type":"application/json"};n["x-serverless-sign"]=de.sign(e,this.config.clientSecret);let i=dt();n["x-client-info"]=encodeURIComponent(JSON.stringify(i));let{token:s}=Te();return n["x-client-token"]=s,{url:this.config.requestUrl,method:"POST",data:e,dataType:"json",header:JSON.parse(JSON.stringify(n))}}setupLocalRequest(t){return L(this,null,function*(){let e=dt(),{token:n}=Te(),i=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now(),clientInfo:e,token:n}),{address:s,servePort:o}=this.__dev__&&this.__dev__.debugInfo||{},{address:a}=yield us(s,o);return{url:`http://${a}:${o}/${ds[t.method]}`,method:"POST",data:i,dataType:"json",header:JSON.parse(JSON.stringify({"Content-Type":"application/json"}))}})}callFunction(t){let e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:t.name,functionArgs:t.data||{}})};return this.request(e,!1)}getUploadFileOptions(t){let e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(t)};return this.request(e)}reportUploadFile(t){let e={method:"serverless.file.resource.report",params:JSON.stringify(t)};return this.request(e)}uploadFile({filePath:t,cloudPath:e,fileType:n="image",onUploadProgress:i}){if(!e)throw new I({code:"CLOUDPATH_REQUIRED",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});let s;return this.getUploadFileOptions({cloudPath:e}).then(o=>{let{url:a,formData:r,name:l}=o.result;return s=o.result.fileUrl,new Promise((c,f)=>{let d=this.adapter.uploadFile({url:a,formData:r,name:l,filePath:t,fileType:n,success(m){m&&m.statusCode<400?c(m):f(new I({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(m){f(new I({code:m.code||"UPLOAD_FAILED",message:m.message||m.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof i=="function"&&d&&typeof d.onProgressUpdate=="function"&&d.onProgressUpdate(m=>{i({loaded:m.totalBytesSent,total:m.totalBytesExpectedToSend})})})}).then(()=>this.reportUploadFile({cloudPath:e})).then(o=>new Promise((a,r)=>{o.success?a({success:!0,filePath:t,fileID:s}):r(new I({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}))}deleteFile({fileList:t}){let e={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:t})};return this.request(e).then(n=>{if(n.success)return n.result;throw new I({code:"DELETE_FILE_FAILED",message:"\u5220\u9664\u6587\u4EF6\u5931\u8D25"})})}getTempFileURL({fileList:t,maxAge:e}={}){if(!Array.isArray(t)||t.length===0)throw new I({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let n={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:t,maxAge:e})};return this.request(n).then(i=>{if(i.success)return{fileList:i.result.fileList.map(s=>({fileID:s.fileID,tempFileURL:s.tempFileURL}))};throw new I({code:"GET_TEMP_FILE_URL_FAILED",message:"\u83B7\u53D6\u4E34\u65F6\u6587\u4EF6\u94FE\u63A5\u5931\u8D25"})})}},on={init(t){let e=new hs(t),n={signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},ke=Y(function(t,e){t.exports=ne.enc.Hex});function Un(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return(t==="x"?e:3&e|8).toString(16)})}function Mn(t="",e={}){let{data:n,functionName:i,method:s,headers:o,signHeaderKeys:a=[],config:r}=e,l=String(Date.now()),c=Un(),f=Object.assign({},o,{"x-from-app-id":r.spaceAppId,"x-from-env-id":r.spaceId,"x-to-env-id":r.spaceId,"x-from-instance-id":l,"x-from-function-name":i,"x-client-timestamp":l,"x-alipay-source":"client","x-request-id":c,"x-alipay-callid":c,"x-trace-id":c}),d=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(a),[m="",g=""]=t.split("?")||[],y=function(h){let u=h.signedHeaders.join(";"),p=h.signedHeaders.map(E=>`${E.toLowerCase()}:${h.headers[E]}
`).join(""),_=ht(h.body).toString(ke),w=`${h.method.toUpperCase()}
${h.path}
${h.query}
${p}
${u}
${_}
`,b=ht(w).toString(ke),S=`HMAC-SHA256
${h.timestamp}
${b}
`,A=An(S,h.secretKey).toString(ke);return`HMAC-SHA256 Credential=${h.secretId}, SignedHeaders=${u}, Signature=${A}`}({path:m,query:g,method:s,headers:f,timestamp:l,body:JSON.stringify(n),secretId:r.accessKey,secretKey:r.secretKey,signedHeaders:d.sort()});return{url:`${r.endpoint}${t}`,headers:Object.assign({},f,{Authorization:y})}}function qn({url:t,data:e,method:n="POST",headers:i={},timeout:s}){return new Promise((o,a)=>{U.request({url:t,method:n,data:typeof e=="object"?JSON.stringify(e):e,header:i,dataType:"json",timeout:s,complete:(r={})=>{let l=i["x-trace-id"]||"";if(!r.statusCode||r.statusCode>=400){let{message:c,errMsg:f,trace_id:d}=r.data||{};return a(new I({code:"SYS_ERR",message:c||f||"request:fail",requestId:d||l}))}o({status:r.statusCode,data:r.data,headers:r.header,requestId:l})}})})}function an(t,e){let{path:n,data:i,method:s="GET"}=t,{url:o,headers:a}=Mn(n,{functionName:"",data:i,method:s,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:e});return qn({url:o,data:i,method:s,headers:a}).then(r=>{let l=r.data||{};if(!l.success)throw new I({code:r.errCode,message:r.errMsg,requestId:r.requestId});return l.data||{}}).catch(r=>{throw new I({code:r.errCode,message:r.errMsg,requestId:r.requestId})})}function fs(t=""){let e=t.trim().replace(/^cloud:\/\//,""),n=e.indexOf("/");if(n<=0)throw new I({code:"INVALID_PARAM",message:"fileID\u4E0D\u5408\u6CD5"});let i=e.substring(0,n),s=e.substring(n+1);return i!==this.config.spaceId&&console.warn("file ".concat(t," does not belong to env ").concat(this.config.spaceId)),s}function ps(t=""){return"cloud://".concat(this.config.spaceId,"/").concat(t.replace(/^\/+/,""))}var kt=class{constructor(e){this.config=e}signedURL(e,n={}){let i=`/ws/function/${e}`,s=this.config.wsEndpoint.replace(/^ws(s)?:\/\//,""),o=Object.assign({},n,{accessKeyId:this.config.accessKey,signatureNonce:Un(),timestamp:""+Date.now()}),a=[i,["accessKeyId","authorization","signatureNonce","timestamp"].sort().map(function(f){return o[f]?"".concat(f,"=").concat(o[f]):null}).filter(Boolean).join("&"),`host:${s}`].join(`
`),r=["HMAC-SHA256",ht(a).toString(ke)].join(`
`),l=An(r,this.config.secretKey).toString(ke),c=Object.keys(o).map(f=>`${f}=${encodeURIComponent(o[f])}`).join("&");return`${this.config.wsEndpoint}${i}?${c}&signature=${l}`}},ms=class{constructor(t){if(["spaceId","spaceAppId","accessKey","secretKey"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`${e} required`)}),t.endpoint){if(typeof t.endpoint!="string")throw new Error("endpoint must be string");if(!/^https:\/\//.test(t.endpoint))throw new Error("endpoint must start with https://");t.endpoint=t.endpoint.replace(/\/$/,"")}this.config=Object.assign({},t,{endpoint:t.endpoint||`https://${t.spaceId}.api-hz.cloudbasefunction.cn`,wsEndpoint:t.wsEndpoint||`wss://${t.spaceId}.api-hz.cloudbasefunction.cn`}),this._websocket=new kt(this.config)}callFunction(t){return function(e,n){let{name:i,data:s,async:o=!1,timeout:a}=e,r="POST",l={"x-to-function-name":i};o&&(l["x-function-invoke-type"]="async");let{url:c,headers:f}=Mn("/functions/invokeFunction",{functionName:i,data:s,method:r,headers:l,signHeaderKeys:["x-to-function-name"],config:n});return qn({url:c,data:s,method:r,headers:f,timeout:a}).then(d=>{let m=0;if(o){let g=d.data||{};m=g.errCode==="200"?0:g.errCode,d.data=g.data||{},d.errMsg=g.errMsg}if(m!==0)throw new I({code:m,message:d.errMsg,requestId:d.requestId});return{errCode:m,success:m===0,requestId:d.requestId,result:d.data}}).catch(d=>{throw new I({code:d.errCode,message:d.errMsg,requestId:d.requestId})})}(t,this.config)}uploadFileToOSS({url:t,filePath:e,fileType:n,formData:i,onUploadProgress:s}){return new Promise((o,a)=>{let r=U.uploadFile({url:t,filePath:e,fileType:n,formData:i,name:"file",success(l){l&&l.statusCode<400?o(l):a(new I({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(l){a(new I({code:l.code||"UPLOAD_FAILED",message:l.message||l.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof s=="function"&&r&&typeof r.onProgressUpdate=="function"&&r.onProgressUpdate(l=>{s({loaded:l.totalBytesSent,total:l.totalBytesExpectedToSend})})})}uploadFile(s){return L(this,arguments,function*({filePath:t,cloudPath:e="",fileType:n="image",onUploadProgress:i}){if(xe(e)!=="string")throw new I({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new I({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new I({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let o=yield an({path:"/".concat(e.replace(/^\//,""),"?post_url")},this.config),{file_id:a,upload_url:r,form_data:l}=o,c=l&&l.reduce((f,d)=>(f[d.key]=d.value,f),{});return this.uploadFileToOSS({url:r,filePath:t,fileType:n,formData:c,onUploadProgress:i}).then(()=>({fileID:a}))})}getTempFileURL(e){return L(this,arguments,function*({fileList:t}){return new Promise((n,i)=>{(!t||t.length<0)&&n({code:"INVALID_PARAM",message:"fileList\u4E0D\u80FD\u4E3A\u7A7A\u6570\u7EC4"}),t.length>50&&n({code:"INVALID_PARAM",message:"fileList\u6570\u7EC4\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC750"});let s=[];for(let o of t){let a;xe(o)!=="string"&&n({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});try{a=fs.call(this,o)}catch(r){console.warn(r.errCode,r.errMsg),a=o}s.push({file_id:a,expire:600})}an({path:"/?download_url",data:{file_list:s},method:"POST"},this.config).then(o=>{let{file_list:a=[]}=o;n({fileList:a.map(r=>({fileID:ps.call(this,r.file_id),tempFileURL:r.download_url}))})}).catch(o=>i(o))})})}connectWebSocket(t){return L(this,null,function*(){let{name:e,query:n}=t;return U.connectSocket({url:this._websocket.signedURL(e,n),complete:()=>{}})})}},gs={init:t=>{t.provider="alipay";let e=new ms(t);return e.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},e}};function _s({data:t}){let e;e=dt();let n=JSON.parse(JSON.stringify(t||{}));if(Object.assign(n,{clientInfo:e}),!n.uniIdToken){let{token:i}=Te();i&&(n.uniIdToken=i)}return n}var ys=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"\uFF0C\u4E91\u51FD\u6570[{functionName}]\u5728\u4E91\u7AEF\u4E0D\u5B58\u5728\uFF0C\u8BF7\u68C0\u67E5\u6B64\u4E91\u51FD\u6570\u540D\u79F0\u662F\u5426\u6B63\u786E\u4EE5\u53CA\u8BE5\u4E91\u51FD\u6570\u662F\u5426\u5DF2\u4E0A\u4F20\u5230\u670D\u52A1\u7A7A\u95F4",mode:"append"}],Bn=/[\\^$.*+?()[\]{}|]/g,ws=RegExp(Bn.source);function rn(t,e,n){return t.replace(new RegExp((i=e)&&ws.test(i)?i.replace(Bn,"\\$&"):i,"g"),n);var i}var bs="request",vs="response",ks="both",xs={code:2e4,message:"System error"},Ts={code:20101,message:"Invalid client"};function Fn(t){let{errSubject:e,subject:n,errCode:i,errMsg:s,code:o,message:a,cause:r}=t||{};return new I({subject:e||n||"uni-secure-network",code:i||o||xs.code,message:s||a,cause:r})}var xt;function cn({secretType:t}={}){return t===bs||t===vs||t===ks}function ln({name:t,data:e={}}={}){return t==="DCloud-clientDB"&&e.redirectTo==="encryption"&&e.action==="getAppClientKey"}function Ss({provider:t,spaceId:e,functionName:n}={}){let{appId:i,uniPlatform:s,osName:o}=Pn(),a=s;s==="app"&&(a=o);let r=function({provider:d,spaceId:m}={}){let g=Mi;if(!g)return{};d=function(h){return h==="tencent"?"tcb":h}(d);let y=g.find(h=>h.provider===d&&h.spaceId===m);return y&&y.config}({provider:t,spaceId:e});if(!r||!r.accessControl||!r.accessControl.enable)return!1;let l=r.accessControl.function||{},c=Object.keys(l);if(c.length===0)return!0;let f=function(d,m){let g,y,h;for(let u=0;u<d.length;u++){let p=d[u];p!==m?p!=="*"?p.split(",").map(_=>_.trim()).indexOf(m)>-1&&(y=p):h=p:g=p}return g||y||h}(c,n);if(!f)return!1;if((l[f]||[]).find((d={})=>d.appId===i&&(d.platform||"").toLowerCase()===a.toLowerCase()))return!0;throw console.error(`\u6B64\u5E94\u7528[appId: ${i}, platform: ${a}]\u4E0D\u5728\u4E91\u7AEF\u914D\u7F6E\u7684\u5141\u8BB8\u8BBF\u95EE\u7684\u5E94\u7528\u5217\u8868\u5185\uFF0C\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),Fn(Ts)}function un({functionName:t,result:e,logPvd:n}){}function Is(t){let e=t.callFunction,n=function(i){let s=i.name;i.data=_s.call(t,{data:i.data});let o={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay",dcloud:"dcloud"}[this.config.provider],a=cn(i),r=ln(i),l=a||r;return e.call(this,i).then(c=>(c.errCode=0,!l&&un.call(this,{functionName:s,result:c,logPvd:o}),Promise.resolve(c)),c=>(!l&&un.call(this,{functionName:s,result:c,logPvd:o}),c&&c.message&&(c.message=function({message:f="",extraInfo:d={},formatter:m=[]}={}){for(let g=0;g<m.length;g++){let{rule:y,content:h,mode:u}=m[g],p=f.match(y);if(!p)continue;let _=h;for(let w=1;w<p.length;w++)_=rn(_,`{$${w}}`,p[w]);for(let w in d)_=rn(_,`{${w}}`,d[w]);return u==="replace"?_:f+_}return f}({message:`[${i.name}]: ${c.message}`,formatter:ys,extraInfo:{functionName:s}})),Promise.reject(c)))};t.callFunction=function(i){let{provider:s,spaceId:o}=t.config,a=i.name,r,l;return i.data=i.data||{},r=n,r=r.bind(t),ln(i)?l=n.call(t,i):cn(i)?l=new xt({secretType:i.secretType,uniCloudIns:t}).wrapEncryptDataCallFunction(n.bind(t))(i):Ss({provider:s,spaceId:o,functionName:a})?l=new xt({secretType:i.secretType,uniCloudIns:t}).wrapVerifyClientCallFunction(n.bind(t))(i):l=r(i),Object.defineProperty(l,"result",{get:()=>(console.warn("\u5F53\u524D\u8FD4\u56DE\u7ED3\u679C\u4E3APromise\u7C7B\u578B\uFF0C\u4E0D\u53EF\u76F4\u63A5\u8BBF\u95EE\u5176result\u5C5E\u6027\uFF0C\u8BE6\u60C5\u8BF7\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),l.then(c=>(typeof UTSJSONObject!="undefined"&&typeof UTS!="undefined"&&(c.result=UTS.JSON.parse(JSON.stringify(c.result))),c))}}xt=class{constructor(){throw Fn({message:`Platform ${Ct} is not enabled, please check whether secure network module is enabled in your manifest.json`})}};var jn=Symbol("CLIENT_DB_INTERNAL");function He(t,e){return t.then="DoNotReturnProxyWithAFunctionNamedThen",t._internalType=jn,t.inspect=null,t.__v_raw=void 0,new Proxy(t,{get(n,i,s){if(i==="_uniClient")return null;if(typeof i=="symbol")return n[i];if(i in n||typeof i!="string"){let o=n[i];return typeof o=="function"?o.bind(n):o}return e.get(n,i,s)}})}function dn(t){return{on:(e,n)=>{t[e]=t[e]||[],t[e].indexOf(n)>-1||t[e].push(n)},off:(e,n)=>{t[e]=t[e]||[];let i=t[e].indexOf(n);i!==-1&&t[e].splice(i,1)}}}var Ps=["db.Geo","db.command","command.aggregate"];function $n(t,e){return Ps.indexOf(`${t}.${e}`)>-1}function re(t){switch(xe(t=Sn(t))){case"array":return t.map(e=>re(e));case"object":return t._internalType===jn||Object.keys(t).forEach(e=>{t[e]=re(t[e])}),t;case"regexp":return{$regexp:{source:t.source,flags:t.flags}};case"date":return{$date:t.toISOString()};default:return t}}function we(t){return t&&t.content&&t.content.$method}var Tt=class{constructor(e,n,i){this.content=e,this.prevStage=n||null,this.udb=null,this._database=i}toJSON(){let e=this,n=[e.content];for(;e.prevStage;)e=e.prevStage,n.push(e.content);return{$db:n.reverse().map(i=>({$method:i.$method,$param:re(i.$param)}))}}toString(){return JSON.stringify(this.toJSON())}getAction(){let e=this.toJSON().$db.find(n=>n.$method==="action");return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter(e=>e.$method!=="action")}}get isAggregate(){let e=this;for(;e;){let n=we(e),i=we(e.prevStage);if(n==="aggregate"&&i==="collection"||n==="pipeline")return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if(we(e)==="command")return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){let n=we(e),i=we(e.prevStage);if(n==="aggregate"&&i==="command")return!0;e=e.prevStage}return!1}getNextStageFn(e){let n=this;return function(){return Se({$method:e,$param:re(Array.from(arguments))},n,n._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL\u7981\u6B62\u4F7F\u7528set\u65B9\u6CD5")}}_send(e,n){let i=this.getAction(),s=this.getCommand();return s.$db.push({$method:e,$param:re(n)}),this._database._callCloudFunction({action:i,command:s})}};function Se(t,e,n){return He(new Tt(t,e,n),{get(i,s){let o="db";return i&&i.content&&(o=i.content.$method),$n(o,s)?Se({$method:s},i,n):function(){return Se({$method:s,$param:re(Array.from(arguments))},i,n)}}})}function lt({path:t,method:e}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...t.map(n=>({$method:n})),{$method:e,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function hn(t,e={}){return He(new t(e),{get:(n,i)=>$n("db",i)?Se({$method:i},null,n):function(){return Se({$method:i,$param:re(Array.from(arguments))},null,n)}})}var We=class extends class{constructor({uniClient:e={},isJQL:n=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=he("_globalUniCloudDatabaseCallback")),n||(this.auth=dn(this._authCallBacks)),this._isJQL=n,Object.assign(this,dn(this._dbCallBacks)),this.env=He({},{get:(i,s)=>({$env:s})}),this.Geo=He({},{get:(i,s)=>lt({path:["Geo"],method:s})}),this.serverDate=lt({path:[],method:"serverDate"}),this.RegExp=lt({path:[],method:"RegExp"})}getCloudEnv(e){if(typeof e!="string"||!e.trim())throw new Error("getCloudEnv\u53C2\u6570\u9519\u8BEF");return{$env:e.replace("$cloudEnv_","")}}_callback(e,n){let i=this._dbCallBacks;i[e]&&i[e].forEach(s=>{s(...n)})}_callbackAuth(e,n){let i=this._authCallBacks;i[e]&&i[e].forEach(s=>{s(...n)})}multiSend(){let e=Array.from(arguments),n=e.map(i=>{let s=i.getAction(),o=i.getCommand();if(o.$db[o.$db.length-1].$method!=="getTemp")throw new Error("multiSend\u53EA\u652F\u6301\u5B50\u547D\u4EE4\u5185\u4F7F\u7528getTemp");return{action:s,command:o}});return this._callCloudFunction({multiCommand:n,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:n,multiCommand:i,queryList:s}){function o(d,m){if(i&&s)for(let g=0;g<s.length;g++){let y=s[g];y.udb&&typeof y.udb.setResult=="function"&&(m?y.udb.setResult(m):y.udb.setResult(d.result.dataList[g]))}}let a=this,r=this._isJQL?"databaseForJQL":"database";function l(d){return a._callback("error",[d]),F(j(r,"fail"),d).then(()=>F(j(r,"complete"),d)).then(()=>(o(null,d),V(J,{type:Wt,content:d}),Promise.reject(d)))}let c=F(j(r,"invoke")),f=this._uniClient;return c.then(()=>f.callFunction({name:"DCloud-clientDB",type:Di,data:{action:e,command:n,multiCommand:i}})).then(d=>{let{code:m,message:g,token:y,tokenExpired:h,systemInfo:u=[]}=d.result;if(u)for(let _=0;_<u.length;_++){let{level:w,message:b,detail:S}=u[_],A=console[w==="warn"?"error":w]||console.log,E="[System Info]"+b;S&&(E=`${E}
\u8BE6\u7EC6\u4FE1\u606F\uFF1A${S}`),A(E)}if(m)return l(new I({code:m,message:g,requestId:d.requestId}));d.result.errCode=d.result.errCode||d.result.code,d.result.errMsg=d.result.errMsg||d.result.message,y&&h&&(In({token:y,tokenExpired:h}),this._callbackAuth("refreshToken",[{token:y,tokenExpired:h}]),this._callback("refreshToken",[{token:y,tokenExpired:h}]),V(Fe,{token:y,tokenExpired:h}));let p=[{prop:"affectedDocs",tips:"affectedDocs\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528inserted/deleted/updated/data.length\u66FF\u4EE3"},{prop:"code",tips:"code\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errCode\u66FF\u4EE3"},{prop:"message",tips:"message\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errMsg\u66FF\u4EE3"}];for(let _=0;_<p.length;_++){let{prop:w,tips:b}=p[_];if(w in d.result){let S=d.result[w];Object.defineProperty(d.result,w,{get:()=>(console.warn(b),S)})}}return function(_){return F(j(r,"success"),_).then(()=>F(j(r,"complete"),_)).then(()=>{o(_,null);let w=a._parseResult(_);return V(J,{type:Wt,content:w}),Promise.resolve(w)})}(d)},d=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(d.message)&&console.warn("clientDB\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5728web\u63A7\u5236\u53F0\u4FDD\u5B58\u4E00\u6B21schema\u4EE5\u5F00\u542FclientDB"),l(new I({code:d.code||"SYSTEM_ERROR",message:d.message,requestId:d.requestId}))))}},ae="token\u65E0\u6548\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",Kn="token\u8FC7\u671F\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",As={TOKEN_INVALID_TOKEN_EXPIRED:Kn,TOKEN_INVALID_INVALID_CLIENTID:ae,TOKEN_INVALID:ae,TOKEN_INVALID_WRONG_TOKEN:ae,TOKEN_INVALID_ANONYMOUS_USER:ae},St={"uni-id-token-expired":Kn,"uni-id-check-token-failed":ae,"uni-id-token-not-exist":ae,"uni-id-check-device-feature-failed":ae};function fn(t,e){let n="";return n=t?`${t}/${e}`:e,n.replace(/^\//,"")}function pn(t=[],e=""){let n=[],i=[];return t.forEach(s=>{s.needLogin===!0?n.push(fn(e,s.path)):s.needLogin===!1&&i.push(fn(e,s.path))}),{needLoginPage:n,notNeedLoginPage:i}}function Ie(t){return t.split("?")[0].replace(/^\//,"")}function Dt(){return function(t){let e=t&&t.$page&&t.$page.fullPath||"";return e&&(e.charAt(0)!=="/"&&(e="/"+e),e)}(function(){let t=getCurrentPages();return t[t.length-1]}())}function zn(){return Ie(Dt())}function Cs(t="",e={}){if(!t||!(e&&e.list&&e.list.length))return!1;let n=e.list,i=Ie(t);return n.some(s=>s.pagePath===i)}var Os=!!_n.uniIdRouter,{loginPage:Pe,routerNeedLogin:Ls,resToLogin:Ds,needLoginPage:Vn,notNeedLoginPage:Es,loginPageInTabBar:Rs}=function({pages:t=[],subPackages:e=[],uniIdRouter:n={},tabBar:i={}}=_n){let{loginPage:s,needLogin:o=[],resToLogin:a=!0}=n,{needLoginPage:r,notNeedLoginPage:l}=pn(t),{needLoginPage:c,notNeedLoginPage:f}=function(d=[]){let m=[],g=[];return d.forEach(y=>{let{root:h,pages:u=[]}=y,{needLoginPage:p,notNeedLoginPage:_}=pn(u,h);m.push(...p),g.push(..._)}),{needLoginPage:m,notNeedLoginPage:g}}(e);return{loginPage:s,routerNeedLogin:o,resToLogin:a,needLoginPage:[...r,...c],notNeedLoginPage:[...l,...f],loginPageInTabBar:Cs(s,i)}}();if(Vn.indexOf(Pe)>-1)throw new Error(`Login page [${Pe}] should not be "needLogin", please check your pages.json`);function Hn(t){let e=zn();if(t.charAt(0)==="/")return t;let[n,i]=t.split("?"),s=n.replace(/^\//,"").split("/"),o=e.split("/");o.pop();for(let a=0;a<s.length;a++){let r=s[a];r===".."?o.pop():r!=="."&&o.push(r)}return o[0]===""&&o.shift(),"/"+o.join("/")+(i?"?"+i:"")}function Ns(t){let e=Ie(Hn(t));return!(Es.indexOf(e)>-1)&&(Vn.indexOf(e)>-1||Ls.some(n=>function(i,s){return new RegExp(s).test(i)}(t,n)))}function Wn({redirect:t}){let e=Ie(t),n=Ie(Pe);return zn()!==n&&e!==n}function It({api:t,redirect:e}={}){if(!e||!Wn({redirect:e}))return;let n=function(s,o){return s.charAt(0)!=="/"&&(s="/"+s),o?s.indexOf("?")>-1?s+`&uniIdRedirectUrl=${encodeURIComponent(o)}`:s+`?uniIdRedirectUrl=${encodeURIComponent(o)}`:s}(Pe,e);Rs?t!=="navigateTo"&&t!=="redirectTo"||(t="switchTab"):t==="switchTab"&&(t="navigateTo");let i={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout(()=>{i[t]({url:n})},0)}function mn({url:t}={}){let e={abortLoginPageJump:!1,autoToLoginPage:!1},n=function(){let{token:i,tokenExpired:s}=Te(),o;if(i){if(s<Date.now()){let a="uni-id-token-expired";o={errCode:a,errMsg:St[a]}}}else{let a="uni-id-check-token-failed";o={errCode:a,errMsg:St[a]}}return o}();if(Ns(t)&&n){if(n.uniIdRedirectUrl=t,Ae(fe).length>0)return setTimeout(()=>{V(fe,n)},0),e.abortLoginPageJump=!0,e;e.autoToLoginPage=!0}return e}function Us(){(function(){let e=Dt(),{abortLoginPageJump:n,autoToLoginPage:i}=mn({url:e});n||i&&It({api:"redirectTo",redirect:e})})();let t=["navigateTo","redirectTo","reLaunch","switchTab"];for(let e=0;e<t.length;e++){let n=t[e];uni.addInterceptor(n,{invoke(i){let{abortLoginPageJump:s,autoToLoginPage:o}=mn({url:i.url});return s?i:o?(It({api:n,redirect:Hn(i.url)}),!1):i}})}}function Ms(){this.onResponse(t=>{let{type:e,content:n}=t,i=!1;switch(e){case"cloudobject":i=function(s){if(typeof s!="object")return!1;let{errCode:o}=s||{};return o in St}(n);break;case"clientdb":i=function(s){if(typeof s!="object")return!1;let{errCode:o}=s||{};return o in As}(n)}i&&function(s={}){let o=Ae(fe);xn().then(()=>{let a=Dt();if(a&&Wn({redirect:a}))return o.length>0?V(fe,Object.assign({uniIdRedirectUrl:a},s)):void(Pe&&It({api:"navigateTo",redirect:a}))})}(n)})}function qs(t){(function(e){e.onResponse=function(n){tt(J,n)},e.offResponse=function(n){nt(J,n)}})(t),function(e){e.onNeedLogin=function(n){tt(fe,n)},e.offNeedLogin=function(n){nt(fe,n)},Os&&(he("_globalUniCloudStatus").needLoginInit||(he("_globalUniCloudStatus").needLoginInit=!0,xn().then(()=>{Us.call(e)}),Ds&&Ms.call(e)))}(t),function(e){e.onRefreshToken=function(n){tt(Fe,n)},e.offRefreshToken=function(n){nt(Fe,n)}}(t)}var Jn,Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Bs=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function Fs(){let t=Te().token||"",e=t.split(".");if(!t||e.length!==3)return{uid:null,role:[],permission:[],tokenExpired:0};let n;try{n=JSON.parse((i=e[1],decodeURIComponent(Jn(i).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(s){throw new Error("\u83B7\u53D6\u5F53\u524D\u7528\u6237\u4FE1\u606F\u51FA\u9519\uFF0C\u8BE6\u7EC6\u9519\u8BEF\u4FE1\u606F\u4E3A\uFF1A"+s.message)}var i;return n.tokenExpired=1e3*n.exp,delete n.exp,delete n.iat,n}Jn=typeof atob!="function"?function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!Bs.test(t))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var e;t+="==".slice(2-(3&t.length));for(var n,i,s="",o=0;o<t.length;)e=Me.indexOf(t.charAt(o++))<<18|Me.indexOf(t.charAt(o++))<<12|(n=Me.indexOf(t.charAt(o++)))<<6|(i=Me.indexOf(t.charAt(o++))),s+=n===64?String.fromCharCode(e>>16&255):i===64?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return s}:atob;var js=Y(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});let n="chooseAndUploadFile:ok",i="chooseAndUploadFile:fail";function s(a,r){return a.tempFiles.forEach((l,c)=>{l.name||(l.name=l.path.substring(l.path.lastIndexOf("/")+1)),r&&(l.fileType=r),l.cloudPath=Date.now()+"_"+c+l.name.substring(l.name.lastIndexOf("."))}),a.tempFilePaths||(a.tempFilePaths=a.tempFiles.map(l=>l.path)),a}function o(a,r,{onChooseFile:l,onUploadProgress:c}){return r.then(f=>{if(l){let d=l(f);if(d!==void 0)return Promise.resolve(d).then(m=>m===void 0?f:m)}return f}).then(f=>f===!1?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(d,m,g=5,y){(m=Object.assign({},m)).errMsg=n;let h=m.tempFiles,u=h.length,p=0;return new Promise(_=>{for(;p<g;)w();function w(){let b=p++;if(b>=u)return void(!h.find(A=>!A.url&&!A.errMsg)&&_(m));let S=h[b];d.uploadFile({provider:S.provider,filePath:S.path,cloudPath:S.cloudPath,fileType:S.fileType,cloudPathAsRealPath:S.cloudPathAsRealPath,onUploadProgress(A){A.index=b,A.tempFile=S,A.tempFilePath=S.path,y&&y(A)}}).then(A=>{S.url=A.fileID,b<u&&w()}).catch(A=>{S.errMsg=A.errMsg||A.message,b<u&&w()})}})}(a,f,5,c))}e.initChooseAndUploadFile=function(a){return function(r={type:"all"}){return r.type==="image"?o(a,function(l){let{count:c,sizeType:f,sourceType:d=["album","camera"],extension:m}=l;return new Promise((g,y)=>{uni.chooseImage({count:c,sizeType:f,sourceType:d,extension:m,success(h){g(s(h,"image"))},fail(h){y({errMsg:h.errMsg.replace("chooseImage:fail",i)})}})})}(r),r):r.type==="video"?o(a,function(l){let{camera:c,compressed:f,maxDuration:d,sourceType:m=["album","camera"],extension:g}=l;return new Promise((y,h)=>{uni.chooseVideo({camera:c,compressed:f,maxDuration:d,sourceType:m,extension:g,success(u){let{tempFilePath:p,duration:_,size:w,height:b,width:S}=u;y(s({errMsg:"chooseVideo:ok",tempFilePaths:[p],tempFiles:[{name:u.tempFile&&u.tempFile.name||"",path:p,size:w,type:u.tempFile&&u.tempFile.type||"",width:S,height:b,duration:_,fileType:"video",cloudPath:""}]},"video"))},fail(u){h({errMsg:u.errMsg.replace("chooseVideo:fail",i)})}})})}(r),r):o(a,function(l){let{count:c,extension:f}=l;return new Promise((d,m)=>{let g=uni.chooseFile;if(typeof wx!="undefined"&&typeof wx.chooseMessageFile=="function"&&(g=wx.chooseMessageFile),typeof g!="function")return m({errMsg:i+" \u8BF7\u6307\u5B9A type \u7C7B\u578B\uFF0C\u8BE5\u5E73\u53F0\u4EC5\u652F\u6301\u9009\u62E9 image \u6216 video\u3002"});g({type:"all",count:c,extension:f,success(y){d(s(y))},fail(y){m({errMsg:y.errMsg.replace("chooseFile:fail",i)})}})})}(r),r)}}}),$s=Ii(js),Ks="manual";function Yn(t){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch(()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach(n=>{e.push(this[n])}),e},(e,n)=>{if(this.loadtime===Ks)return;let i=!1,s=[];for(let o=2;o<e.length;o++)e[o]!==n[o]&&(s.push(e[o]),i=!0);e[0]!==n[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(i,s)})},methods:{onMixinDatacomPropsChange(e,n){},mixinDatacomEasyGet({getone:e=!1,success:n,fail:i}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then(s=>{this.mixinDatacomLoading=!1;let{data:o,count:a}=s.result;this.getcount&&(this.mixinDatacomPage.count=a),this.mixinDatacomHasMore=o.length<this.pageSize;let r=e?o.length?o[0]:void 0:o;this.mixinDatacomResData=r,n&&n(r)}).catch(s=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=s,this.mixinDatacomError=s,i&&i(s)}))},mixinDatacomGet(e={}){let n;e=e||{},n=typeof __uniX!="undefined"&&__uniX?t.databaseForJQL(this.spaceInfo):t.database(this.spaceInfo);let i=e.action||this.action;i&&(n=n.action(i));let s=e.collection||this.collection;n=Array.isArray(s)?n.collection(...s):n.collection(s);let o=e.where||this.where;o&&Object.keys(o).length&&(n=n.where(o));let a=e.field||this.field;a&&(n=n.field(a));let r=e.foreignKey||this.foreignKey;r&&(n=n.foreignKey(r));let l=e.groupby||this.groupby;l&&(n=n.groupBy(l));let c=e.groupField||this.groupField;c&&(n=n.groupField(c)),(e.distinct!==void 0?e.distinct:this.distinct)===!0&&(n=n.distinct());let f=e.orderby||this.orderby;f&&(n=n.orderBy(f));let d=e.pageCurrent!==void 0?e.pageCurrent:this.mixinDatacomPage.current,m=e.pageSize!==void 0?e.pageSize:this.mixinDatacomPage.size,g=e.getcount!==void 0?e.getcount:this.getcount,y=e.gettree!==void 0?e.gettree:this.gettree,h=e.gettreepath!==void 0?e.gettreepath:this.gettreepath,u={getCount:g},p={limitLevel:e.limitlevel!==void 0?e.limitlevel:this.limitlevel,startWith:e.startwith!==void 0?e.startwith:this.startwith};return y&&(u.getTree=p),h&&(u.getTreePath=p),n=n.skip(m*(d-1)).limit(m).get(u),n}}}}function zs(t){return function(e,n={}){n=function(l,c={}){return l.customUI=c.customUI||l.customUI,l.parseSystemError=c.parseSystemError||l.parseSystemError,Object.assign(l.loadingOptions,c.loadingOptions),Object.assign(l.errorOptions,c.errorOptions),typeof c.secretMethods=="object"&&(l.secretMethods=c.secretMethods),l}({customUI:!1,loadingOptions:{title:"\u52A0\u8F7D\u4E2D...",mask:!0},errorOptions:{type:"modal",retry:!1}},n);let{customUI:i,loadingOptions:s,errorOptions:o,parseSystemError:a}=n,r=!i;return new Proxy({},{get(l,c){switch(c){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function({fn:f,interceptorName:d,getCallbackArgs:m}={}){return function(...g){return L(this,null,function*(){let y=m?m({params:g}):{},h,u;try{return yield F(j(d,"invoke"),D({},y)),h=yield f(...g),yield F(j(d,"success"),q(D({},y),{result:h})),h}catch(p){throw u=p,yield F(j(d,"fail"),q(D({},y),{error:u})),u}finally{yield F(j(d,"complete"),u?q(D({},y),{error:u}):q(D({},y),{result:h}))}})}}({fn:function f(...d){return L(this,null,function*(){let m;r&&uni.showLoading({title:s.title,mask:s.mask});let g={name:e,type:Li,data:{method:c,params:d}};typeof n.secretMethods=="object"&&function(w,b){let S=b.data.method,A=w.secretMethods||{},E=A[S]||A["*"];E&&(b.secretType=E)}(n,g);let y=!1;try{m=yield t.callFunction(g)}catch(w){y=!0,m={result:new I(w)}}let{errSubject:h,errCode:u,errMsg:p,newToken:_}=m.result||{};if(r&&uni.hideLoading(),_&&_.token&&_.tokenExpired&&(In(_),V(Fe,D({},_))),u){let w=p;if(y&&a&&(w=(yield a({objectName:e,methodName:c,params:d,errSubject:h,errCode:u,errMsg:p})).errMsg||p),r)if(o.type==="toast")uni.showToast({title:w,icon:"none"});else{if(o.type!=="modal")throw new Error(`Invalid errorOptions.type: ${o.type}`);{let{confirm:S}=yield function(){return L(this,arguments,function*({title:A,content:E,showCancel:R,cancelText:M,confirmText:Q}={}){return new Promise((K,se)=>{uni.showModal({title:A,content:E,showCancel:R,cancelText:M,confirmText:Q,success(Z){K(Z)},fail(){K({confirm:!1,cancel:!0})}})})})}({title:"\u63D0\u793A",content:w,showCancel:o.retry,cancelText:"\u53D6\u6D88",confirmText:o.retry?"\u91CD\u8BD5":"\u786E\u5B9A"});if(o.retry&&S)return f(...d)}}let b=new I({subject:h,code:u,message:p,requestId:m.requestId});throw b.detail=m.result,V(J,{type:Jt,content:b}),b}return V(J,{type:Jt,content:m.result}),m.result})},interceptorName:"callObject",getCallbackArgs:function({params:f}={}){return{objectName:e,methodName:c,params:f}}})}})}}function Gn(t){return he("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",t.config.spaceId))}function Vs(){return L(this,arguments,function*({openid:t,callLoginByWeixin:e=!1}={}){throw Gn(this),new Error(`[SecureNetwork] API \`initSecureNetworkByWeixin\` is not supported on platform \`${Ct}\``)})}function Hs(t){return L(this,null,function*(){let e=Gn(this);return e.initPromise||(e.initPromise=Vs.call(this,t).then(n=>n).catch(n=>{throw delete e.initPromise,n})),e.initPromise})}function Ws(t){return function({openid:e,callLoginByWeixin:n=!1}={}){return Hs.call(t,{openid:e,callLoginByWeixin:n})}}function Js(t){(function(e){ut=e})(t)}function gn(t){let e={getSystemInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(n){return new Promise((i,s)=>{e[t](q(D({},n),{success(o){i(o)},fail(o){s(o)}}))})}}var Pt=class extends class{constructor(){this._callback={}}addListener(e,n){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(n)}on(e,n){return this.addListener(e,n)}removeListener(e,n){if(!n)throw new Error('The "listener" argument must be of type function. Received undefined');let i=this._callback[e];if(!i)return;let s=function(o,a){for(let r=o.length-1;r>=0;r--)if(o[r]===a)return r;return-1}(i,n);i.splice(s,1)}off(e,n){return this.removeListener(e,n)}removeAllListener(e){delete this._callback[e]}emit(e,...n){let i=this._callback[e];if(i)for(let s=0;s<i.length;s++)i[s](...n)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([gn("getSystemInfo")(),gn("getPushClientId")()]).then(([{appId:e}={},{cid:n}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!n)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=n,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()},e=>{throw this.emit("error",e),this.close(),e})}open(){return L(this,null,function*(){return this.init()})}_isUniCloudSSE(e){if(e.type!=="receive")return!1;let n=e&&e.data&&e.data.payload;return!(!n||n.channel!=="UNI_CLOUD_SSE"||n.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;let n=e&&e.data&&e.data.payload,{action:i,messageId:s,message:o}=n;this._payloadQueue.push({action:i,messageId:s,message:o}),this._consumMessage()}_consumMessage(){for(;;){let e=this._payloadQueue.find(n=>n.messageId===this._currentMessageId+1);if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){let{action:n,messageId:i,message:s}=e;n==="end"?this._end({messageId:i,message:s}):n==="message"&&this._appendMessage({messageId:i,message:s})}_appendMessage({messageId:e,message:n}={}){this.emit("message",n)}_end({messageId:e,message:n}={}){this.emit("end",n),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}};function Ys(t){t._initPromiseHub||(t._initPromiseHub=new Be({createPromise:function(){let e=Promise.resolve();var n;n=1,e=new Promise(s=>{setTimeout(()=>{s()},n)});let i=t.auth();return e.then(()=>i.getLoginState()).then(s=>s?Promise.resolve():i.signInAnonymously())}}))}var Gs={tcb:sn,tencent:sn,aliyun:Vi,private:on,dcloud:on,alipay:gs},z=new class{init(t){let e={},n=Gs[t.provider];if(!n)throw new Error("\u672A\u63D0\u4F9B\u6B63\u786E\u7684provider\u53C2\u6570");return e=n.init(t),Ys(e),Is(e),function(i){let s=i.uploadFile;i.uploadFile=function(o){return s.call(this,o)}}(e),function(i){i.database=function(s){if(s&&Object.keys(s).length>0)return i.init(s).database();if(this._database)return this._database;let o=hn(We,{uniClient:i});return this._database=o,o},i.databaseForJQL=function(s){if(s&&Object.keys(s).length>0)return i.init(s).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;let o=hn(We,{uniClient:i,isJQL:!0});return this._databaseForJQL=o,o}}(e),function(i){i.getCurrentUserInfo=Fs,i.chooseAndUploadFile=$s.initChooseAndUploadFile(i),Object.assign(i,{get mixinDatacom(){return Yn(i)}}),i.SSEChannel=Pt,i.initSecureNetworkByWeixin=Ws(i),i.setCustomClientInfo=Js,i.importObject=zs(i)}(e),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach(i=>{if(!e[i])return;let s=e[i];e[i]=function(){return s.apply(e,Array.from(arguments))},e[i]=function(o,a){return function(r){let l=!1;a==="callFunction"&&(l=(r&&r.type||Kt)!==Kt);let c=a==="callFunction"&&!l,f=this._initPromiseHub.exec();r=r||{};let{success:d,fail:m,complete:g}=Tn(r),y=f.then(()=>l?Promise.resolve():F(j(a,"invoke"),r)).then(()=>o.call(this,r)).then(h=>l?Promise.resolve(h):F(j(a,"success"),h).then(()=>F(j(a,"complete"),h)).then(()=>(c&&V(J,{type:Ne,content:h}),Promise.resolve(h))),h=>l?Promise.reject(h):F(j(a,"fail"),h).then(()=>F(j(a,"complete"),h)).then(()=>(V(J,{type:Ne,content:h}),Promise.reject(h))));if(!(d||m||g))return y;y.then(h=>{d&&d(h),g&&g(h),c&&V(J,{type:Ne,content:h})},h=>{m&&m(h),g&&g(h),c&&V(J,{type:Ne,content:h})})}}(e[i],i).bind(e)}),e.init=this.init,e}};(()=>{let t=qi,e={};if(t&&t.length===1)e=t[0],z=z.init(e),z._isDefault=!0;else{let n=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"],i;i=t&&t.length>0?"\u5E94\u7528\u6709\u591A\u4E2A\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u901A\u8FC7uniCloud.init\u65B9\u6CD5\u6307\u5B9A\u8981\u4F7F\u7528\u7684\u670D\u52A1\u7A7A\u95F4":"\u5E94\u7528\u672A\u5173\u8054\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u5728uniCloud\u76EE\u5F55\u53F3\u952E\u5173\u8054\u670D\u52A1\u7A7A\u95F4",n.forEach(s=>{z[s]=function(){return console.error(i),Promise.reject(new I({code:"SYS_ERR",message:i}))}})}if(Object.assign(z,{get mixinDatacom(){return Yn(z)}}),qs(z),z.addInterceptor=kn,z.removeInterceptor=ji,z.interceptObject=$i,uni.__uniCloud=z,Ct==="app"){let n=Fi();n.uniCloud=z,n.UniCloudError=I}})();var Xs=z,Qs={"uni-stat__select":{"":{display:"flex",alignItems:"center",cursor:"pointer",width:100,flex:1,boxSizing:"border-box",backgroundColor:"#FFFFFF"}},"uni-stat-box":{"":{width:100,flex:1}},"uni-stat__actived":{"":{width:100,flex:1}},"uni-label-text":{"":{fontSize:14,fontWeight:"bold",color:"#6a6a6a",marginRight:5,marginLeft:0}},"uni-select":{"":{fontSize:14,borderWidth:1,borderStyle:"solid",borderColor:"#e5e5e5",boxSizing:"border-box",borderRadius:4,paddingTop:0,paddingRight:5,paddingBottom:0,paddingLeft:10,position:"relative",flexDirection:"row",alignItems:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"#e5e5e5",width:100,flex:1,height:35}},"uni-select--disabled":{"":{backgroundColor:"#f5f7fa",cursor:"not-allowed"}},"uni-select__label":{"":{fontSize:16,height:35,paddingRight:10,color:"#909399"}},"uni-select__input-box":{"":{height:35,position:"relative",flex:1,flexDirection:"row",alignItems:"center"}},"uni-select__input":{"":{flex:1,fontSize:14,height:22,lineHeight:22}},"uni-select__input-plac":{"":{fontSize:14,color:"#909399"}},"uni-select__selector":{"":{position:"absolute",left:0,width:100,backgroundColor:"#FFFFFF",borderWidth:1,borderStyle:"solid",borderColor:"#EBEEF5",borderRadius:6,boxShadow:"0 2px 12px 0 rgba(0, 0, 0, 0.8)",zIndex:3,paddingTop:4,paddingRight:0,paddingBottom:4,paddingLeft:0}},"uni-select__selector-button":{"":{marginTop:5,marginBottom:5,width:100}},"uni-select__selector-empty":{"":{position:"relative",lineHeight:35,fontSize:14,textAlign:"center",paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10}},"uni-select__selector-item":{"":{position:"relative",lineHeight:35,fontSize:14,textAlign:"center",paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,"backgroundColor:hover":"#f9f9f9"}},"uni-select__selector-checked":{"":{"content::after":'""',"position::after":"absolute","top::after":30,"right::after":15,"width::after":4,"height::after":8,"transform::after":"rotate(45deg)","borderBottomWidth::after":2,"borderBottomStyle::after":"solid","borderBottomColor::after":"#006AEC","borderRightWidth::after":2,"borderRightStyle::after":"solid","borderRightColor::after":"#006AEC"}},"uni-select__selector__disabled":{"":{opacity:.4,cursor:"default"}},"uni-popper__arrow":{"":{"position::after":"absolute","width::after":0,"height::after":0,"borderColor::after":"rgba(0,0,0,0)","borderStyle::after":"solid","borderWidth::after":6,filter:"drop-shadow(0 2px 12px rgba(0, 0, 0, 0.03))",top:-6,left:10,marginRight:3,borderTopWidth:0,borderBottomColor:"#EBEEF5","content::after":'" "',"top::after":1,"marginLeft::after":-6,"borderTopWidth::after":0,"borderBottomColor::after":"#ffffff"}},"uni-select__input-text":{"":{width:100,color:"#333333",whiteSpace:"nowrap",textOverflow:"ellipsis",OTextOverflow:"ellipsis",overflow:"hidden"}},"uni-select__input-placeholder":{"":{color:"#6a6a6a",fontSize:12}},"uni-select--mask":{"":{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1}}},Zs={name:"uni-stat-select",mixins:[Xs.mixinDatacom||{}],data(){return{showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[]}},props:{localdata:{type:Array,default(){return[]}},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},emptyTips:{type:String,default:"\u65E0\u9009\u9879"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0},multi:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},created(){this.last=`${this.collection}_last_selected_option_value`,this.collection&&!this.localdata.length&&this.mixinDatacomEasyGet()},computed:{typePlaceholder(){let t={"opendb-stat-app-versions":"\u7248\u672C","opendb-app-channels":"\u6E20\u9053","opendb-app-list":"\u5E94\u7528"},e=this.placeholder,n=t[this.collection];return n?e+n:e},values(){let t=this.modelValue.toString();return t?t.toString().split(","):[]},multiCurrent(){let t="";for(let e of this.localdata)this.values.indexOf(e.value)>-1&&(t+=`${t?","+e.text:e.text}`);return t}},watch:{localdata:{immediate:!0,handler(t,e){Array.isArray(t)&&e!==t&&(this.mixinDatacomResData=t)}},modelValue(){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler(t){t.length&&this.initDefVal()}}},methods:{initDefVal(){let t="";if((this.value||this.value===0)&&!this.isDisabled(this.value))t=this.value;else if((this.modelValue||this.modelValue===0)&&!this.isDisabled(this.modelValue))t=this.modelValue;else{let n;if(this.collection&&(n=uni.getStorageSync(this.last)),n||n===0)t=n;else{let i="";this.defItem>0&&this.defItem<this.mixinDatacomResData.length&&(i=this.mixinDatacomResData[this.defItem-1].value),t=i}this.emit(t)}let e=this.mixinDatacomResData.find(n=>n.value===t);this.current=e?this.formatItemName(e):""},isDisabled(t){let e=!1;return this.mixinDatacomResData.forEach(n=>{n.value===t&&(e=n.disable)}),e},clearVal(){this.emit(""),this.collection&&uni.removeStorageSync(this.last)},change(t){if(!t.disable)if(!this.multi)this.showSelector=!1,this.current=this.formatItemName(t),this.emit(t.value);else{let e=this.containsItem(t),n;e?this.values.splice(this.values.indexOf(t.value),1):this.values.push(t.value),n=this.values.join(","),this.emit(n)}},containsItem(t){return this.values.indexOf(t.value)>-1},emit(t){this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t),this.collection&&uni.setStorageSync(this.last,t)},toggleSelector(){this.disabled||(this.showSelector=!this.showSelector)},formatItemName(t){let{text:e,value:n,channel_code:i}=t;return i=i?`(${i})`:"",this.collection.indexOf("app-list")>0?`${e}(${n})`:e||`\u672A\u547D\u540D${i}`}}};function eo(t,e,n,i,s,o){let a=G((0,P.resolveDynamicComponent)("uni-icons"),jt),r=(0,P.resolveComponent)("button");return(0,P.openBlock)(),(0,P.createElementBlock)("view",{class:"uni-stat__select",renderWhole:!0},[n.label?((0,P.openBlock)(),(0,P.createElementBlock)("span",{key:0,class:"uni-label-text hide-on-phone"},[(0,P.createElementVNode)("u-text",null,(0,P.toDisplayString)(n.label+"\uFF1A"),1)])):(0,P.createCommentVNode)("",!0),(0,P.createElementVNode)("view",{class:(0,P.normalizeClass)(["uni-stat-box",{"uni-stat__actived":s.current}])},[(0,P.createElementVNode)("view",{class:(0,P.normalizeClass)(["uni-select",{"uni-select--disabled":n.disabled}])},[(0,P.createElementVNode)("view",{class:"uni-select__input-box",onClick:e[0]||(e[0]=(...l)=>o.toggleSelector&&o.toggleSelector(...l))},[o.multiCurrent?((0,P.openBlock)(),(0,P.createElementBlock)("view",{key:0,class:"uni-select__input-text"},[(0,P.createElementVNode)("u-text",null,(0,P.toDisplayString)(o.multiCurrent),1)])):((0,P.openBlock)(),(0,P.createElementBlock)("view",{key:1,class:"uni-select__input-text uni-select__input-placeholder"},[(0,P.createElementVNode)("u-text",null,(0,P.toDisplayString)(o.typePlaceholder),1)])),o.multiCurrent&&n.clear?((0,P.openBlock)(),(0,P.createBlock)(a,{key:2,type:"clear",color:"#c0c4cc",size:"24",onClick:o.clearVal},null,8,["onClick"])):((0,P.openBlock)(),(0,P.createBlock)(a,{key:3,type:s.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"]))]),s.showSelector?((0,P.openBlock)(),(0,P.createElementBlock)("view",{key:0,class:"uni-select--mask",onClick:e[1]||(e[1]=(...l)=>o.toggleSelector&&o.toggleSelector(...l))})):(0,P.createCommentVNode)("",!0),s.showSelector?((0,P.openBlock)(),(0,P.createElementBlock)("view",{key:1,class:"uni-select__selector"},[(0,P.createElementVNode)("view",{class:"uni-popper__arrow"}),(0,P.createElementVNode)("scroll-view",{scrollY:"true",class:"uni-select__selector-scroll"},[s.mixinDatacomResData.length===0?((0,P.openBlock)(),(0,P.createElementBlock)("view",{key:0,class:"uni-select__selector-empty"},[(0,P.createElementVNode)("u-text",null,(0,P.toDisplayString)(n.emptyTips),1)])):((0,P.openBlock)(!0),(0,P.createElementBlock)(P.Fragment,{key:1},(0,P.renderList)(s.mixinDatacomResData,(l,c)=>((0,P.openBlock)(),(0,P.createElementBlock)("view",{class:(0,P.normalizeClass)(["uni-select__selector-item",{"uni-select__selector-checked":o.containsItem(l)}]),key:c,onClick:f=>o.change(l)},[(0,P.createElementVNode)("u-text",{class:(0,P.normalizeClass)({"uni-select__selector__disabled":l.disable})},(0,P.toDisplayString)(o.formatItemName(l)),3)],10,["onClick"]))),128))]),n.multi?((0,P.openBlock)(),(0,P.createBlock)(r,{key:0,class:"uni-select__selector-button",size:"mini",type:"primary",onClick:o.toggleSelector},{default:(0,P.withCtx)(()=>[(0,P.createTextVNode)("\u786E\u5B9A")]),_:1},8,["onClick"])):(0,P.createCommentVNode)("",!0)])):(0,P.createCommentVNode)("",!0)],2)],2)])}var Xn=H(Zs,[["render",eo],["styles",[Qs]]]);var C=ye(ue());var to=t=>t!==null&&typeof t=="object",no=["{","}"],Rt=class{constructor(){this._caches=Object.create(null)}interpolate(e,n,i=no){if(!n)return[e];let s=this._caches[e];return s||(s=oo(e,i),this._caches[e]=s),ao(s,n)}},io=/^(?:\d)+/,so=/^(?:\w)+/;function oo(t,[e,n]){let i=[],s=0,o="";for(;s<t.length;){let a=t[s++];if(a===e){o&&i.push({type:"text",value:o}),o="";let r="";for(a=t[s++];a!==void 0&&a!==n;)r+=a,a=t[s++];let l=a===n,c=io.test(r)?"list":l&&so.test(r)?"named":"unknown";i.push({value:r,type:c})}else o+=a}return o&&i.push({type:"text",value:o}),i}function ao(t,e){let n=[],i=0,s=Array.isArray(e)?"list":to(e)?"named":"unknown";if(s==="unknown")return n;for(;i<t.length;){let o=t[i];switch(o.type){case"text":n.push(o.value);break;case"list":n.push(e[parseInt(o.value,10)]);break;case"named":s==="named"&&n.push(e[o.value]);break}i++}return n}var Et="zh-Hans",Qn="zh-Hant",_e="en",ro="fr",co="es",lo=Object.prototype.hasOwnProperty,Zn=(t,e)=>lo.call(t,e),uo=new Rt;function ho(t,e){return!!e.find(n=>t.indexOf(n)!==-1)}function fo(t,e){return e.find(n=>t.indexOf(n)===0)}function ei(t,e){if(!t)return;if(t=t.trim().replace(/_/g,"-"),e&&e[t])return t;if(t=t.toLowerCase(),t==="chinese")return Et;if(t.indexOf("zh")===0)return t.indexOf("-hans")>-1?Et:t.indexOf("-hant")>-1||ho(t,["-tw","-hk","-mo","-cht"])?Qn:Et;let n=[_e,ro,co];e&&Object.keys(e).length>0&&(n=Object.keys(e));let i=fo(t,n);if(i)return i}var Nt=class{constructor({locale:e,fallbackLocale:n,messages:i,watcher:s,formater:o}){this.locale=_e,this.fallbackLocale=_e,this.message={},this.messages={},this.watchers=[],n&&(this.fallbackLocale=n),this.formater=o||uo,this.messages=i||{},this.setLocale(e||_e),s&&this.watchLocale(s)}setLocale(e){let n=this.locale;this.locale=ei(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],n!==this.locale&&this.watchers.forEach(i=>{i(this.locale,n)})}getLocale(){return this.locale}watchLocale(e){let n=this.watchers.push(e)-1;return()=>{this.watchers.splice(n,1)}}add(e,n,i=!0){let s=this.messages[e];s?i?Object.assign(s,n):Object.keys(n).forEach(o=>{Zn(s,o)||(s[o]=n[o])}):this.messages[e]=n}f(e,n,i){return this.formater.interpolate(e,n,i).join("")}t(e,n,i){let s=this.message;return typeof n=="string"?(n=ei(n,this.messages),n&&(s=this.messages[n])):i=n,Zn(s,e)?this.formater.interpolate(s[e],i).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}};function po(t,e){t.$watchLocale?t.$watchLocale(n=>{e.setLocale(n)}):t.$watch(()=>t.$locale,n=>{e.setLocale(n)})}function mo(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():_e}function ti(t,e={},n,i){if(typeof t!="string"){let a=[e,t];t=a[0],e=a[1]}typeof t!="string"&&(t=mo()),typeof n!="string"&&(n=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||_e);let s=new Nt({locale:t,fallbackLocale:n,messages:e,watcher:i}),o=(a,r)=>{if(typeof getApp!="function")o=function(l,c){return s.t(l,c)};else{let l=!1;o=function(c,f){let d=getApp().$vm;return d&&(d.$locale,l||(l=!0,po(d,s))),s.t(c,f)}}return o(a,r)};return{i18n:s,f(a,r,l){return s.f(a,r,l)},t(a,r){return o(a,r)},add(a,r,l=!0){return s.add(a,r,l)},watch(a){return s.watchLocale(a)},getLocale(){return s.getLocale()},setLocale(a){return s.setLocale(a)}}}var O=ye(ue());var go={data(){return{}},created(){this.popup=this.getParent()},methods:{getParent(t="uniPopup"){let e=this.$parent,n=e.$options.name;for(;n!==t;){if(e=e.$parent,!e)return!1;n=e.$options.name}return e}}},_o={"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},yo={"uni-popup.cancel":"\u53D6\u6D88","uni-popup.ok":"\u786E\u5B9A","uni-popup.placeholder":"\u8BF7\u8F93\u5165","uni-popup.title":"\u63D0\u793A","uni-popup.shareTitle":"\u5206\u4EAB\u5230"},wo={"uni-popup.cancel":"\u53D6\u6D88","uni-popup.ok":"\u78BA\u5B9A","uni-popup.placeholder":"\u8ACB\u8F38\u5165","uni-popup.title":"\u63D0\u793A","uni-popup.shareTitle":"\u5206\u4EAB\u5230"},bo={en:_o,"zh-Hans":yo,"zh-Hant":wo},vo={"uni-popup-dialog":{"":{width:500,borderRadius:11,backgroundColor:"#ffffff"}},"uni-dialog-title":{"":{flexDirection:"row",justifyContent:"center",paddingTop:25}},"uni-dialog-title-text":{"":{fontSize:16,fontWeight:"500"}},"uni-dialog-content":{"":{flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:20,paddingRight:20,paddingBottom:20,paddingLeft:20}},"uni-dialog-content-text":{"":{fontSize:14,color:"#6C6C6C"}},"uni-dialog-button-group":{"":{flexDirection:"row",borderTopColor:"#f5f5f5",borderTopStyle:"solid",borderTopWidth:1}},"uni-dialog-button":{"":{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:45}},"uni-border-left":{"":{borderLeftColor:"#f0f0f0",borderLeftStyle:"solid",borderLeftWidth:1}},"uni-dialog-button-text":{"":{fontSize:16,color:"#333333"}},"uni-button-color":{"":{color:"#007aff"}},"uni-dialog-input":{"":{flex:1,fontSize:14,borderWidth:1,borderStyle:"solid",borderColor:"#eeeeee",height:40,paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,borderRadius:5,color:"#555555"}},"uni-popup__success":{"":{color:"#4cd964"}},"uni-popup__warn":{"":{color:"#f0ad4e"}},"uni-popup__error":{"":{color:"#dd524d"}},"uni-popup__info":{"":{color:"#909399"}}},{t:Je}=ti(bo),ko={name:"uniPopupDialog",mixins:[go],emits:["confirm","close","other"],props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},otherText:{type:String,default:""}},data(){return{dialogType:"error",focus:!1,val:""}},computed:{okText(){return this.confirmText||Je("uni-popup.ok")},closeText(){return this.cancelText||Je("uni-popup.cancel")},placeholderText(){return this.placeholder||Je("uni-popup.placeholder")},titleText(){return this.title||Je("uni-popup.title")}},watch:{type(t){this.dialogType=t},mode(t){t==="input"&&(this.dialogType="info")},value(t){this.val=t}},created(){this.popup.disableMask(),this.mode==="input"?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted(){this.focus=!0},methods:{onOk(){this.mode==="input"?this.$emit("confirm",this.val):this.$emit("confirm"),!this.beforeClose&&this.popup.close()},closeDialog(){this.$emit("close"),!this.beforeClose&&this.popup.close()},onOther(){this.mode==="input"?this.$emit("other",this.val):this.$emit("other"),!this.beforeClose&&this.popup.close()},close(){this.popup.close()}}};function xo(t,e,n,i,s,o){return(0,O.openBlock)(),(0,O.createElementBlock)("view",{class:"uni-popup-dialog",renderWhole:!0},[(0,O.createElementVNode)("view",{class:"uni-dialog-title"},[(0,O.createElementVNode)("u-text",{class:(0,O.normalizeClass)(["uni-dialog-title-text",["uni-popup__"+s.dialogType]])},(0,O.toDisplayString)(o.titleText),3)]),n.mode==="base"?((0,O.openBlock)(),(0,O.createElementBlock)("view",{key:0,class:"uni-dialog-content"},[(0,O.renderSlot)(t.$slots,"default",{},()=>[(0,O.createElementVNode)("u-text",{class:"uni-dialog-content-text"},(0,O.toDisplayString)(n.content),1)])])):((0,O.openBlock)(),(0,O.createElementBlock)("view",{key:1,class:"uni-dialog-content"},[(0,O.renderSlot)(t.$slots,"default",{},()=>[(0,O.createElementVNode)("u-input",{class:"uni-dialog-input",modelValue:s.val,onInput:e[0]||(e[0]=a=>s.val=a.detail.value),type:"text",placeholder:o.placeholderText,focus:s.focus},null,40,["modelValue","placeholder","focus"])])])),(0,O.createElementVNode)("view",{class:"uni-dialog-button-group"},[(0,O.createElementVNode)("view",{class:"uni-dialog-button",onClick:e[1]||(e[1]=(...a)=>o.closeDialog&&o.closeDialog(...a))},[(0,O.createElementVNode)("u-text",{class:"uni-dialog-button-text"},(0,O.toDisplayString)(o.closeText),1)]),(0,O.createElementVNode)("view",{class:"uni-dialog-button uni-border-left",onClick:e[2]||(e[2]=(...a)=>o.onOk&&o.onOk(...a))},[(0,O.createElementVNode)("u-text",{class:"uni-dialog-button-text uni-button-color"},(0,O.toDisplayString)(o.okText),1)]),n.otherText?((0,O.openBlock)(),(0,O.createElementBlock)("view",{key:0,class:"uni-dialog-button uni-border-left",onClick:e[3]||(e[3]=(...a)=>o.onOther&&o.onOther(...a))},[(0,O.createElementVNode)("u-text",{class:"uni-dialog-button-text uni-popup__error"},(0,O.toDisplayString)(n.otherText),1)])):(0,O.createCommentVNode)("",!0)])])}var ii=H(ko,[["render",xo],["styles",[vo]]]),To=$t("animation"),Ye=class{constructor(e,n){this.options=e,this.animation=uni.createAnimation(e),this.currentStepAnimates={},this.next=0,this.$=n}_nvuePushAnimates(e,n){let i=this.currentStepAnimates[this.next],s={};if(i?s=i:s={styles:{},config:{}},si.includes(e)){s.styles.transform||(s.styles.transform="");let o="";e==="rotate"&&(o="deg"),s.styles.transform+=`${e}(${n+o}) `}else s.styles[e]=`${n}`;this.currentStepAnimates[this.next]=s}_animateRun(e={},n={}){let i=this.$.$refs.ani.ref;if(i)return new Promise((s,o)=>{To.transition(i,D({styles:e},n),a=>{s()})})}_nvueNextAnimate(e,n=0,i){let s=e[n];if(s){let{styles:o,config:a}=s;this._animateRun(o,a).then(()=>{n+=1,this._nvueNextAnimate(e,n,i)})}else this.currentStepAnimates={},typeof i=="function"&&i(),this.isEnd=!0}step(e={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,e),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(e){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,e),this.next=0)}},si=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],So=["opacity","backgroundColor"],Io=["width","height","left","right","top","bottom"];si.concat(So,Io).forEach(t=>{Ye.prototype[t]=function(...e){return this._nvuePushAnimates(t,e),this}});function ni(t,e){if(e)return clearTimeout(e.timer),new Ye(t,e)}var Po={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(t){t?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let t=q(D({},this.styles),{"transition-duration":this.duration/1e3+"s"}),e="";for(let n in t){let i=this.toLine(n);e+=i+":"+t[n]+";"}return e},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(t={}){t.duration&&(this.durationTime=t.duration),this.animation=ni(Object.assign(this.config,t),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(t,e={}){if(this.animation){for(let n in t)try{typeof t[n]=="object"?this.animation[n](...t[n]):this.animation[n](t[n])}catch(i){Qe("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`\u65B9\u6CD5 ${n} \u4E0D\u5B58\u5728`)}return this.animation.step(e),this}},run(t){this.animation&&this.animation.run(t)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:t,transform:e}=this.styleInit(!1);typeof t!="undefined"&&(this.opacity=t),this.transform=e,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=ni(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(t){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:n}=this.styleInit(!1);this.opacity=e||1,this.transform=n,this.$emit("change",{detail:this.isShow})})},styleInit(t){let e={transform:""},n=(i,s)=>{s==="fade"?e.opacity=this.animationType(i)[s]:e.transform+=this.animationType(i)[s]+" "};return typeof this.modeClass=="string"?n(t,this.modeClass):this.modeClass.forEach(i=>{n(t,i)}),e},tranfromInit(t){let e=(n,i)=>{let s=null;i==="fade"?s=n?0:1:(s=n?"-100%":"0",i==="zoom-in"&&(s=n?.8:1),i==="zoom-out"&&(s=n?1.2:1),i==="slide-right"&&(s=n?"100%":"0"),i==="slide-bottom"&&(s=n?"100%":"0")),this.animation[this.animationMode()[i]](s)};return typeof this.modeClass=="string"?e(t,this.modeClass):this.modeClass.forEach(n=>{e(t,n)}),this.animation},animationType(t){return{fade:t?1:0,"slide-top":`translateY(${t?"0":"-100%"})`,"slide-right":`translateX(${t?"0":"100%"})`,"slide-bottom":`translateY(${t?"0":"100%"})`,"slide-left":`translateX(${t?"0":"-100%"})`,"zoom-in":`scaleX(${t?1:.8}) scaleY(${t?1:.8})`,"zoom-out":`scaleX(${t?1:1.2}) scaleY(${t?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function Ao(t,e,n,i,s,o){return s.isShow?((0,O.openBlock)(),(0,O.createElementBlock)("view",{key:0,ref:"ani",animation:s.animationData,class:(0,O.normalizeClass)(n.customClass),style:(0,O.normalizeStyle)(o.transformStyles),onClick:e[0]||(e[0]=(...a)=>o.onClick&&o.onClick(...a)),renderWhole:!0},[(0,O.renderSlot)(t.$slots,"default")],14,["animation"])):(0,O.createCommentVNode)("",!0)}var Co=H(Po,[["render",Ao]]),Oo={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},Lo={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(t){this.config[t]&&this[this.config[t]](!0)},immediate:!0},isDesktop:{handler:function(t){this.config[t]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(t){this.mkclick=t},immediate:!0},isMaskClick:{handler:function(t){this.mkclick=t},immediate:!0},showPopup(t){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:e,windowHeight:n,windowTop:i,safeArea:s,screenHeight:o,safeAreaInsets:a}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=n+(i||0),s&&this.safeArea?this.safeAreaInsets=a.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){this.isMaskClick===null&&this.maskClick===null?this.mkclick=!0:this.mkclick=this.isMaskClick!==null?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(t){},open(t){if(this.showPopup&&(clearTimeout(this.timer),this.showPopup=!1),t&&["top","center","bottom","left","right","message","dialog","share"].indexOf(t)!==-1||(t=this.type),!this.config[t]){Qe("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:280","\u7F3A\u5C11\u7C7B\u578B\uFF1A",t);return}this[this.config[t]](),this.$emit("change",{show:!0,type:t})},close(t){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(t){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},!t&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(t){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},!t&&(this.showPopup=!0,this.showTrans=!0)},center(t){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},!t&&(this.showPopup=!0,this.showTrans=!0)},left(t){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg},!t&&(this.showPopup=!0,this.showTrans=!0)},right(t){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg},!t&&(this.showPopup=!0,this.showTrans=!0)}}};function Do(t,e,n,i,s,o){let a=G((0,O.resolveDynamicComponent)("uni-transition"),Co);return s.showPopup?((0,O.openBlock)(),(0,O.createElementBlock)("view",{key:0,class:(0,O.normalizeClass)(["uni-popup",[s.popupstyle,o.isDesktop?"fixforpc-z-index":""]]),renderWhole:!0},[(0,O.createElementVNode)("view",{onTouchstart:e[1]||(e[1]=(...r)=>o.touchstart&&o.touchstart(...r))},[s.maskShow?((0,O.openBlock)(),(0,O.createBlock)(a,{key:"1",name:"mask","mode-class":"fade",styles:s.maskClass,duration:s.duration,show:s.showTrans,onClick:o.onTap},null,8,["styles","duration","show","onClick"])):(0,O.createCommentVNode)("",!0),(0,O.createVNode)(a,{key:"2","mode-class":s.ani,name:"content",styles:s.transClass,duration:s.duration,show:s.showTrans,onClick:o.onTap},{default:(0,O.withCtx)(()=>[(0,O.createElementVNode)("view",{class:(0,O.normalizeClass)(["uni-popup__wrapper",[s.popupstyle]]),style:(0,O.normalizeStyle)({backgroundColor:o.bg}),onClick:e[0]||(e[0]=(...r)=>o.clear&&o.clear(...r))},[(0,O.renderSlot)(t.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):(0,O.createCommentVNode)("",!0)}var oi=H(Lo,[["render",Do],["styles",[Oo]]]);var Eo={"uni-badge--x":{"":{position:"relative"}},"uni-badge--absolute":{"":{position:"absolute"}},"uni-badge--small":{"":{transform:"scale(0.8)",transformOrigin:"center center"}},"uni-badge":{"":{justifyContent:"center",flexDirection:"row",height:20,minWidth:"20px",paddingTop:0,paddingRight:4,paddingBottom:0,paddingLeft:4,lineHeight:18,color:"#ffffff",borderRadius:100,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderStyle:"solid",borderColor:"#ffffff",textAlign:"center",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontFeatureSettings:'"tnum"',fontSize:12}},"uni-badge--info":{"":{color:"#ffffff",backgroundColor:"#909399"}},"uni-badge--primary":{"":{backgroundColor:"#2979ff"}},"uni-badge--success":{"":{backgroundColor:"#4cd964"}},"uni-badge--warning":{"":{backgroundColor:"#f0ad4e"}},"uni-badge--error":{"":{backgroundColor:"#dd524d"}},"uni-badge--inverted":{"":{paddingTop:0,paddingRight:5,paddingBottom:0,paddingLeft:0,color:"#909399"}},"uni-badge--info-inverted":{"":{color:"#909399",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--primary-inverted":{"":{color:"#2979ff",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--success-inverted":{"":{color:"#4cd964",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--warning-inverted":{"":{color:"#f0ad4e",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--error-inverted":{"":{color:"#dd524d",backgroundColor:"rgba(0,0,0,0)"}}},Ro={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default(){return[0,0]}},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default(){return{}}}},data(){return{}},computed:{width(){return String(this.text).length*8+12},classNames(){let{inverted:t,type:e,size:n,absolute:i}=this;return[t?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+n,i?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let t=this.width/2,e=10;this.isDot&&(t=5,e=5);let n=`${-t+this.offset[0]}px`,i=`${-e+this.offset[1]}px`,s={rightTop:{right:n,top:i},rightBottom:{right:n,bottom:i},leftBottom:{left:n,bottom:i},leftTop:{left:n,top:i}},o=s[this.absolute];return o||s.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){let{isDot:t,text:e,maxNum:n}=this;return t?"":Number(e)>n?`${n}+`:e}},methods:{onClick(){this.$emit("click")}}};function No(t,e,n,i,s,o){return(0,C.openBlock)(),(0,C.createElementBlock)("view",{class:"uni-badge--x",renderWhole:!0},[(0,C.renderSlot)(t.$slots,"default"),n.text?((0,C.openBlock)(),(0,C.createElementBlock)("u-text",{key:0,class:(0,C.normalizeClass)([o.classNames,"uni-badge"]),style:(0,C.normalizeStyle)([o.positionStyle,n.customStyle,o.dotStyle]),onClick:e[0]||(e[0]=a=>o.onClick())},(0,C.toDisplayString)(o.displayValue),7)):(0,C.createCommentVNode)("",!0)])}var Uo=H(Ro,[["render",No],["styles",[Eo]]]),Mo={"uni-container":{"":{backgroundColor:"#4682B4"}}},qo={data(){return{range:[{value:0,text:"\u7BEE\u7403"},{value:1,text:"\u8DB3\u7403"},{value:2,text:"\u6E38\u6CF3"}],list:[{id:"fingerprint-component",name:"fingerprint component",open:!1,url:"/pages/sample/ext-finger-component"},{id:"idcardact-module",name:"id card act module",open:!1,url:"/pages/sample/idcardact-module"},{id:"ext-module",name:"\u6D3B\u4F53\u68C0\u6D4B \u6269\u5C55 module",open:!1,url:"/pages/sample/ext-module"},{id:"ext-component",name:"\u6269\u5C55 component",open:!1,url:"/pages/sample/ext-component"},{id:"richAlert",name:"\u63D2\u4EF6\u793A\u4F8BRichAlert",open:!1,url:"/pages/sample/richAlert"},{id:"form-nvue-demo",name:"form-nvue-demo",open:!1,url:"/pages/sample/form-ndemo"}],navigateFlag:!1}},onReady(){},methods:{change(t){},triggerCollapse(t){if(!this.list[t].pages){this.goDetailPage(this.list[t].url);return}for(var e=0;e<this.list.length;++e)t===e?this.list[e].open=!this.list[t].open:this.list[e].open=!1},goDetailPage(t){if(!this.navigateFlag)return this.navigateFlag=!0,uni.navigateTo({url:t}),setTimeout(()=>{this.navigateFlag=!1},200),!1}}};function Bo(t,e,n,i,s,o){let a=G((0,C.resolveDynamicComponent)("uni-data-select"),Xn),r=G((0,C.resolveDynamicComponent)("uni-badge"),Uo),l=G((0,C.resolveDynamicComponent)("uni-popup-dialog"),ii),c=G((0,C.resolveDynamicComponent)("uni-popup"),oi);return(0,C.openBlock)(),(0,C.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,C.createElementVNode)("view",{class:"uni-container"},[(0,C.createVNode)(a,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=f=>t.value=f),localdata:s.range,onChange:o.change},null,8,["modelValue","localdata","onChange"]),(0,C.createElementVNode)("view",{class:"uni-hello-text"},[(0,C.createElementVNode)("u-text",{class:"hello-text"},"uni\u539F\u751F\u63D2\u4EF6\u793A\u4F8B")]),((0,C.openBlock)(!0),(0,C.createElementBlock)(C.Fragment,null,(0,C.renderList)(s.list,(f,d)=>((0,C.openBlock)(),(0,C.createElementBlock)("view",{class:"uni-panel",key:f.id},[(0,C.createElementVNode)("view",{class:(0,C.normalizeClass)(["uni-panel-h",f.open?"uni-panel-h-on":""]),onClick:m=>o.triggerCollapse(d)},[(0,C.createElementVNode)("u-text",{class:"uni-panel-text"},(0,C.toDisplayString)(f.name),1),(0,C.createElementVNode)("u-text",{class:(0,C.normalizeClass)(["uni-panel-icon uni-icon",f.open?"uni-panel-icon-on":""])},(0,C.toDisplayString)(f.pages?"\uE581":"\uE470"),3)],10,["onClick"]),f.open?((0,C.openBlock)(),(0,C.createElementBlock)("view",{key:0,class:"uni-panel-c"},[((0,C.openBlock)(!0),(0,C.createElementBlock)(C.Fragment,null,(0,C.renderList)(f.pages,(m,g)=>((0,C.openBlock)(),(0,C.createElementBlock)("view",{class:"uni-navigate-item",key:g,onClick:y=>o.goDetailPage(m.url)},[(0,C.createElementVNode)("u-text",{class:"uni-navigate-text"},(0,C.toDisplayString)(m.name?m.name:m),1),(0,C.createElementVNode)("u-text",{class:"uni-navigate-icon uni-icon"},"\uE470")],8,["onClick"]))),128))])):(0,C.createCommentVNode)("",!0)]))),128)),(0,C.createVNode)(r,{text:"1230"}),(0,C.createVNode)(c,{ref:"popup",type:"dialog"},{default:(0,C.withCtx)(()=>[(0,C.createVNode)(l,{content:"23123123"})]),_:1},512)])])}var Ge=H(qo,[["render",Bo],["styles",[Mo]]]);var Ut=plus.webview.currentWebview();if(Ut){let t=parseInt(Ut.id),e="pages/index/test",n={};try{n=JSON.parse(Ut.__query__)}catch(s){}Ge.mpType="page";let i=Vue.createPageApp(Ge,{$store:getApp({allowDefault:!0}).$store,__pageId:t,__pagePath:e,__pageQuery:n});i.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...Ge.styles||[]])),i.mount("#root")}})();
